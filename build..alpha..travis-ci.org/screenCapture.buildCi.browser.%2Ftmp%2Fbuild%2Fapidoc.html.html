<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a>html5 (vv1.0.5)</a>
</h1>
<h4>HTML5 HTML parser, including support for SVG and MathML foreign content</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.html5">module html5</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMParser">
            function <span class="apidocSignatureSpan">html5.</span>DOMParser
            <span class="apidocSignatureSpan">(implementation)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder">
            function <span class="apidocSignatureSpan">html5.</span>DOMTreeBuilder
            <span class="apidocSignatureSpan">(implementation)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_">
            function <span class="apidocSignatureSpan">html5.</span>DOMTreeBuilder.super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.JSDOMParser">
            function <span class="apidocSignatureSpan">html5.</span>JSDOMParser
            <span class="apidocSignatureSpan">(document, core)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.JSDOMTreeBuilder">
            function <span class="apidocSignatureSpan">html5.</span>JSDOMTreeBuilder
            <span class="apidocSignatureSpan">(document, core)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.SAXParser">
            function <span class="apidocSignatureSpan">html5.</span>SAXParser
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.SAXTreeBuilder">
            function <span class="apidocSignatureSpan">html5.</span>SAXTreeBuilder
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.Tokenizer">
            function <span class="apidocSignatureSpan">html5.</span>Tokenizer
            <span class="apidocSignatureSpan">(tokenHandler)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">html5.</span>DOMParser.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">html5.</span>DOMTreeBuilder.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">html5.</span>DOMTreeBuilder.super_.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">html5.</span>ElementStack</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">html5.</span>InputStream</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">html5.</span>JSDOMParser.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">html5.</span>JSDOMTreeBuilder.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">html5.</span>SAXParser.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">html5.</span>SAXTreeBuilder.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">html5.</span>StackItem</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">html5.</span>Tokenizer.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">html5.</span>TreeBuilder</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">html5.</span>TreeParser</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">html5.</span>array_helpers</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.html5.DOMParser">module html5.DOMParser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMParser.DOMParser">
            function <span class="apidocSignatureSpan">html5.</span>DOMParser
            <span class="apidocSignatureSpan">(implementation)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.html5.DOMParser.prototype">module html5.DOMParser.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMParser.prototype.parse">
            function <span class="apidocSignatureSpan">html5.DOMParser.prototype.</span>parse
            <span class="apidocSignatureSpan">(source)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMParser.prototype.parseFragment">
            function <span class="apidocSignatureSpan">html5.DOMParser.prototype.</span>parseFragment
            <span class="apidocSignatureSpan">(source, context)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.html5.DOMTreeBuilder">module html5.DOMTreeBuilder</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.DOMTreeBuilder">
            function <span class="apidocSignatureSpan">html5.</span>DOMTreeBuilder
            <span class="apidocSignatureSpan">(implementation)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.html5.DOMTreeBuilder.prototype">module html5.DOMTreeBuilder.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.prototype.addAttributesToElement">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.prototype.</span>addAttributesToElement
            <span class="apidocSignatureSpan">(element, attributes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.prototype.appendCharacters">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.prototype.</span>appendCharacters
            <span class="apidocSignatureSpan">(parent, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.prototype.attachNode">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.prototype.</span>attachNode
            <span class="apidocSignatureSpan">(child, parent)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.prototype.attachNodeToFosterParent">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.prototype.</span>attachNodeToFosterParent
            <span class="apidocSignatureSpan">(child, table, stackParent)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.prototype.createElement">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.prototype.</span>createElement
            <span class="apidocSignatureSpan">(namespaceURI, localName, attributes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.prototype.detachFromParent">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.prototype.</span>detachFromParent
            <span class="apidocSignatureSpan">(node)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.prototype.insertComment">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.prototype.</span>insertComment
            <span class="apidocSignatureSpan">(data, parent)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.prototype.insertDoctype">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.prototype.</span>insertDoctype
            <span class="apidocSignatureSpan">(name, publicId, systemId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.prototype.insertText">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.prototype.</span>insertText
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.prototype.reparentChildren">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.prototype.</span>reparentChildren
            <span class="apidocSignatureSpan">(oldParent, newParent)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.prototype.start">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.prototype.</span>start
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.html5.DOMTreeBuilder.super_">module html5.DOMTreeBuilder.super_</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.super_">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.html5.DOMTreeBuilder.super_.prototype">module html5.DOMTreeBuilder.super_.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.addAttributesToElement">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>addAttributesToElement
            <span class="apidocSignatureSpan">(element, attributes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.adjustForeignAttributes">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>adjustForeignAttributes
            <span class="apidocSignatureSpan">(attributes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.adjustMathMLAttributes">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>adjustMathMLAttributes
            <span class="apidocSignatureSpan">(attributes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.adjustSVGAttributes">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>adjustSVGAttributes
            <span class="apidocSignatureSpan">(attributes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.adjustSVGTagNameCase">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>adjustSVGTagNameCase
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.adoptionAgencyEndTag">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>adoptionAgencyEndTag
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.appendElementToActiveFormattingElements">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>appendElementToActiveFormattingElements
            <span class="apidocSignatureSpan">(item)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.attachNode">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>attachNode
            <span class="apidocSignatureSpan">(child, parent)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.attachNodeToFosterParent">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>attachNodeToFosterParent
            <span class="apidocSignatureSpan">(child, table, stackParent)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.clearActiveFormattingElements">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>clearActiveFormattingElements
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.createElement">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>createElement
            <span class="apidocSignatureSpan">(namespaceURI, localName, attributes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.currentStackItem">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>currentStackItem
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.detachFromParent">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>detachFromParent
            <span class="apidocSignatureSpan">(node)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.elementInActiveFormattingElements">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>elementInActiveFormattingElements
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.ensureNoahsArkCondition">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>ensureNoahsArkCondition
            <span class="apidocSignatureSpan">(item)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.generateImpliedEndTags">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>generateImpliedEndTags
            <span class="apidocSignatureSpan">(exclude)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.getFragment">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>getFragment
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertBodyElement">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>insertBodyElement
            <span class="apidocSignatureSpan">(attributes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertComment">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>insertComment
            <span class="apidocSignatureSpan">(data, parent)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertDoctype">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>insertDoctype
            <span class="apidocSignatureSpan">(name, publicId, systemId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertElement">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>insertElement
            <span class="apidocSignatureSpan">(name, attributes, namespaceURI, selfClosing)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertForeignElement">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>insertForeignElement
            <span class="apidocSignatureSpan">(name, attributes, namespaceURI, selfClosing)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertFormattingElement">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>insertFormattingElement
            <span class="apidocSignatureSpan">(name, attributes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertHeadElement">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>insertHeadElement
            <span class="apidocSignatureSpan">(attributes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertHtmlElement">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>insertHtmlElement
            <span class="apidocSignatureSpan">(attributes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertIntoFosterParent">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>insertIntoFosterParent
            <span class="apidocSignatureSpan">(node)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertSelfClosingElement">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>insertSelfClosingElement
            <span class="apidocSignatureSpan">(name, attributes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertText">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>insertText
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.isCdataSectionAllowed">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>isCdataSectionAllowed
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.isSelfClosingFlagAcknowledged">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>isSelfClosingFlagAcknowledged
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.parseError">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>parseError
            <span class="apidocSignatureSpan">(code, args)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.popElement">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>popElement
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.processGenericRCDATAStartTag">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>processGenericRCDATAStartTag
            <span class="apidocSignatureSpan">(name, attributes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.processGenericRawTextStartTag">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>processGenericRawTextStartTag
            <span class="apidocSignatureSpan">(name, attributes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.processToken">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>processToken
            <span class="apidocSignatureSpan">(token)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.reconstructActiveFormattingElements">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>reconstructActiveFormattingElements
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.removeElementFromActiveFormattingElements">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>removeElementFromActiveFormattingElements
            <span class="apidocSignatureSpan">(item)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.reparentChildren">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>reparentChildren
            <span class="apidocSignatureSpan">(oldParent, newParent)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.resetInsertionMode">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>resetInsertionMode
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.setFragmentContext">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>setFragmentContext
            <span class="apidocSignatureSpan">(context)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.setInsertionMode">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>setInsertionMode
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.shouldFosterParent">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>shouldFosterParent
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.start">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>start
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.startTokenization">
            function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>startTokenization
            <span class="apidocSignatureSpan">(tokenizer)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.html5.ElementStack">module html5.ElementStack</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.ElementStack.ElementStack">
            function <span class="apidocSignatureSpan">html5.</span>ElementStack
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.html5.InputStream">module html5.InputStream</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.InputStream.InputStream">
            function <span class="apidocSignatureSpan">html5.</span>InputStream
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.html5.JSDOMParser">module html5.JSDOMParser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.JSDOMParser.JSDOMParser">
            function <span class="apidocSignatureSpan">html5.</span>JSDOMParser
            <span class="apidocSignatureSpan">(document, core)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.html5.JSDOMParser.prototype">module html5.JSDOMParser.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.JSDOMParser.prototype.parse">
            function <span class="apidocSignatureSpan">html5.JSDOMParser.prototype.</span>parse
            <span class="apidocSignatureSpan">(source)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.JSDOMParser.prototype.parseFragment">
            function <span class="apidocSignatureSpan">html5.JSDOMParser.prototype.</span>parseFragment
            <span class="apidocSignatureSpan">(source, fragment, contextElement)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.html5.JSDOMTreeBuilder">module html5.JSDOMTreeBuilder</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.JSDOMTreeBuilder.JSDOMTreeBuilder">
            function <span class="apidocSignatureSpan">html5.</span>JSDOMTreeBuilder
            <span class="apidocSignatureSpan">(document, core)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.JSDOMTreeBuilder.super_">
            function <span class="apidocSignatureSpan">html5.JSDOMTreeBuilder.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.html5.JSDOMTreeBuilder.prototype">module html5.JSDOMTreeBuilder.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.JSDOMTreeBuilder.prototype.addAttributesToElement">
            function <span class="apidocSignatureSpan">html5.JSDOMTreeBuilder.prototype.</span>addAttributesToElement
            <span class="apidocSignatureSpan">(element, attributes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.JSDOMTreeBuilder.prototype.appendCharacters">
            function <span class="apidocSignatureSpan">html5.JSDOMTreeBuilder.prototype.</span>appendCharacters
            <span class="apidocSignatureSpan">(parent, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.JSDOMTreeBuilder.prototype.attachNode">
            function <span class="apidocSignatureSpan">html5.JSDOMTreeBuilder.prototype.</span>attachNode
            <span class="apidocSignatureSpan">(child, parent)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.JSDOMTreeBuilder.prototype.attachNodeToFosterParent">
            function <span class="apidocSignatureSpan">html5.JSDOMTreeBuilder.prototype.</span>attachNodeToFosterParent
            <span class="apidocSignatureSpan">(child, table, stackParent)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.JSDOMTreeBuilder.prototype.createElement">
            function <span class="apidocSignatureSpan">html5.JSDOMTreeBuilder.prototype.</span>createElement
            <span class="apidocSignatureSpan">(namespaceURI, localName, attributes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.JSDOMTreeBuilder.prototype.detachFromParent">
            function <span class="apidocSignatureSpan">html5.JSDOMTreeBuilder.prototype.</span>detachFromParent
            <span class="apidocSignatureSpan">(node)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.JSDOMTreeBuilder.prototype.insertComment">
            function <span class="apidocSignatureSpan">html5.JSDOMTreeBuilder.prototype.</span>insertComment
            <span class="apidocSignatureSpan">(data, parent)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.JSDOMTreeBuilder.prototype.insertDoctype">
            function <span class="apidocSignatureSpan">html5.JSDOMTreeBuilder.prototype.</span>insertDoctype
            <span class="apidocSignatureSpan">(name, publicId, systemId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.JSDOMTreeBuilder.prototype.insertText">
            function <span class="apidocSignatureSpan">html5.JSDOMTreeBuilder.prototype.</span>insertText
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.JSDOMTreeBuilder.prototype.reparentChildren">
            function <span class="apidocSignatureSpan">html5.JSDOMTreeBuilder.prototype.</span>reparentChildren
            <span class="apidocSignatureSpan">(oldParent, newParent)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.JSDOMTreeBuilder.prototype.start">
            function <span class="apidocSignatureSpan">html5.JSDOMTreeBuilder.prototype.</span>start
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.html5.SAXParser">module html5.SAXParser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.SAXParser.SAXParser">
            function <span class="apidocSignatureSpan">html5.</span>SAXParser
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.html5.SAXParser.prototype">module html5.SAXParser.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.SAXParser.prototype.parse">
            function <span class="apidocSignatureSpan">html5.SAXParser.prototype.</span>parse
            <span class="apidocSignatureSpan">(source)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.SAXParser.prototype.parseFragment">
            function <span class="apidocSignatureSpan">html5.SAXParser.prototype.</span>parseFragment
            <span class="apidocSignatureSpan">(source, context)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.html5.SAXTreeBuilder">module html5.SAXTreeBuilder</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.SAXTreeBuilder.SAXTreeBuilder">
            function <span class="apidocSignatureSpan">html5.</span>SAXTreeBuilder
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.SAXTreeBuilder.super_">
            function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.html5.SAXTreeBuilder.prototype">module html5.SAXTreeBuilder.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.SAXTreeBuilder.prototype.addAttributesToElement">
            function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.prototype.</span>addAttributesToElement
            <span class="apidocSignatureSpan">(element, attributes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.SAXTreeBuilder.prototype.appendCharacters">
            function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.prototype.</span>appendCharacters
            <span class="apidocSignatureSpan">(parent, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.SAXTreeBuilder.prototype.attachNode">
            function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.prototype.</span>attachNode
            <span class="apidocSignatureSpan">(node, parent)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.SAXTreeBuilder.prototype.attachNodeToFosterParent">
            function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.prototype.</span>attachNodeToFosterParent
            <span class="apidocSignatureSpan">(child, table, stackParent)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.SAXTreeBuilder.prototype.createElement">
            function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.prototype.</span>createElement
            <span class="apidocSignatureSpan">(namespaceURI, localName, attributes)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.SAXTreeBuilder.prototype.detachFromParent">
            function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.prototype.</span>detachFromParent
            <span class="apidocSignatureSpan">(element)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.SAXTreeBuilder.prototype.end">
            function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.prototype.</span>end
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.SAXTreeBuilder.prototype.getFragment">
            function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.prototype.</span>getFragment
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.SAXTreeBuilder.prototype.insertComment">
            function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.prototype.</span>insertComment
            <span class="apidocSignatureSpan">(data, parent)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.SAXTreeBuilder.prototype.insertDoctype">
            function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.prototype.</span>insertDoctype
            <span class="apidocSignatureSpan">(name, publicId, systemId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.SAXTreeBuilder.prototype.insertText">
            function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.prototype.</span>insertText
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.SAXTreeBuilder.prototype.reparentChildren">
            function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.prototype.</span>reparentChildren
            <span class="apidocSignatureSpan">(oldParent, newParent)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.SAXTreeBuilder.prototype.start">
            function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.prototype.</span>start
            <span class="apidocSignatureSpan">(tokenizer)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.html5.StackItem">module html5.StackItem</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.StackItem.StackItem">
            function <span class="apidocSignatureSpan">html5.</span>StackItem
            <span class="apidocSignatureSpan">(namespaceURI, localName, attributes, node)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.html5.Tokenizer">module html5.Tokenizer</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.Tokenizer.Tokenizer">
            function <span class="apidocSignatureSpan">html5.</span>Tokenizer
            <span class="apidocSignatureSpan">(tokenHandler)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.html5.Tokenizer.prototype">module html5.Tokenizer.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.Tokenizer.prototype._currentAttribute">
            function <span class="apidocSignatureSpan">html5.Tokenizer.prototype.</span>_currentAttribute
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.Tokenizer.prototype._emitCurrentToken">
            function <span class="apidocSignatureSpan">html5.Tokenizer.prototype.</span>_emitCurrentToken
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.Tokenizer.prototype._emitToken">
            function <span class="apidocSignatureSpan">html5.Tokenizer.prototype.</span>_emitToken
            <span class="apidocSignatureSpan">(token)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.Tokenizer.prototype._parseError">
            function <span class="apidocSignatureSpan">html5.Tokenizer.prototype.</span>_parseError
            <span class="apidocSignatureSpan">(code, args)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.Tokenizer.prototype.setState">
            function <span class="apidocSignatureSpan">html5.Tokenizer.prototype.</span>setState
            <span class="apidocSignatureSpan">(state)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.Tokenizer.prototype.tokenize">
            function <span class="apidocSignatureSpan">html5.Tokenizer.prototype.</span>tokenize
            <span class="apidocSignatureSpan">(source)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.html5.TreeBuilder">module html5.TreeBuilder</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.TreeBuilder.TreeBuilder">
            function <span class="apidocSignatureSpan">html5.</span>TreeBuilder
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.html5.TreeParser">module html5.TreeParser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.TreeParser.TreeParser">
            function <span class="apidocSignatureSpan">html5.</span>TreeParser
            <span class="apidocSignatureSpan">(contentHandler, lexicalHandler)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.html5.array_helpers">module html5.array_helpers</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.html5.array_helpers.last">
            function <span class="apidocSignatureSpan">html5.array_helpers.</span>last
            <span class="apidocSignatureSpan">(array)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.html5" id="apidoc.module.html5">module html5</a></h1>


    <h2>
        <a href="#apidoc.element.html5.DOMParser" id="apidoc.element.html5.DOMParser">
        function <span class="apidocSignatureSpan">html5.</span>DOMParser
        <span class="apidocSignatureSpan">(implementation)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DOMParser(implementation) {
	this._treeBuilder = new DOMTreeBuilder(implementation);
	this._tokenizer = new Tokenizer(this._treeBuilder);
	this._scriptingEnabled = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder" id="apidoc.element.html5.DOMTreeBuilder">
        function <span class="apidocSignatureSpan">html5.</span>DOMTreeBuilder
        <span class="apidocSignatureSpan">(implementation)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DOMTreeBuilder(implementation) {
    this.implementation = implementation;
	TreeBuilder.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_" id="apidoc.element.html5.DOMTreeBuilder.super_">
        function <span class="apidocSignatureSpan">html5.</span>DOMTreeBuilder.super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function TreeBuilder() {
	this.tokenizer = null;
	this.errorHandler = null;
	this.scriptingEnabled = false;
	this.document = null;
	this.head = null;
	this.form = null;
	this.openElements = new ElementStack();
	this.activeFormattingElements = [];
	this.insertionMode = null;
	this.insertionModeName = "";
	this.originalInsertionMode = "";
	this.inQuirksMode = false; // TODO quirks mode
	this.compatMode = "no quirks";
	this.framesetOk = true;
	this.redirectAttachToFosterParent = false;
	this.selfClosingFlagAcknowledged = false;
	this.context = "";
	this.pendingTableCharacters = [];
	this.shouldSkipLeadingNewline = false;

	var tree = this;
	var modes = this.insertionModes = {};
	modes.base = {
		end_tag_handlers: {"-default": 'endTagOther'},
		start_tag_handlers: {"-default": 'startTagOther'},
		processEOF: function() {
			tree.generateImpliedEndTags();
			if (tree.openElements.length &gt; 2) {
				tree.parseError('expected-closing-tag-but-got-eof');
			} else if (tree.openElements.length == 2 &amp;&amp;
				tree.openElements.item(1).localName != 'body') {
				// This happens for framesets or something?
				tree.parseError('expected-closing-tag-but-got-eof');
			} else if (tree.context &amp;&amp; tree.openElements.length &gt; 1) {
				// XXX This is not what the specification says. Not sure what to do here.
				//tree.parseError('eof-in-innerhtml');
			}
		},
		processComment: function(data) {
			// For most phases the following is forceQuirks. Where it's not it will be
			// overridden.
			tree.insertComment(data, tree.currentStackItem().node);
		},
		processDoctype: function(name, publicId, systemId, forceQuirks) {
			tree.parseError('unexpected-doctype');
		},
		processStartTag: function(name, attributes, selfClosing) {
			if (this[this.start_tag_handlers[name]]) {
				this[this.start_tag_handlers[name]](name, attributes, selfClosing);
			} else if (this[this.start_tag_handlers["-default"]]) {
				this[this.start_tag_handlers["-default"]](name, attributes, selfClosing);
			} else {
				throw(new Error("No handler found for "+name));
			}
		},
		processEndTag: function(name) {
			if (this[this.end_tag_handlers[name]]) {
				this[this.end_tag_handlers[name]](name);
			} else if (this[this.end_tag_handlers["-default"]]) {
				this[this.end_tag_handlers["-default"]](name);
			} else {
				throw(new Error("No handler found for "+name));
			}
		},
		startTagHtml: function(name, attributes) {
			modes.inBody.startTagHtml(name, attributes);
		}
	};

	modes.initial = Object.create(modes.base);

	modes.initial.processEOF = function() {
		tree.parseError("expected-doctype-but-got-eof");
		this.anythingElse();
		tree.insertionMode.processEOF();
	};

	modes.initial.processComment = function(data) {
		tree.insertComment(data, tree.document);
	};

	modes.initial.processDoctype = function(name, publicId, systemId, forceQuirks) {
		tree.insertDoctype(name || '', publicId || '', systemId || '');

		if (forceQuirks || name != 'html' || (publicId != null &amp;&amp; ([
					"+//silmaril//dtd html pro v0r11 19970101//",
					"-//advasoft ltd//dtd html 3.0 aswedit + extensions//",
					"-//as//dtd html 3.0 aswedit + extensions//",
					"-//ietf//dtd html 2.0 level 1//",
					"-//ietf//dtd html 2.0 level 2//",
					"-//ietf//dtd html 2.0 strict level 1//",
					"-//ietf//dtd html 2.0 strict level 2//",
					"-//ietf//dtd html 2.0 strict//",
					"-//ietf//dtd html 2.0//",
					"-//ietf//dtd html 2.1e//",
					"-//ietf//dtd html 3.0//",
					"-//ietf//dtd html 3.0//",
					"-//ietf//dtd html 3.2 final//",
					"-//ietf//dtd html 3.2//",
					"-//ietf//dtd html 3//",
					"-//ietf//dtd html level 0//",
					"-//ietf//dtd html level 0//",
					"-//ietf//dtd html level 1//",
					"-//ietf//dtd html level 1//",
					"-//ietf//dtd html level 2//",
					"-//ietf//dtd html level 2//",
					"-//ietf//dtd html level 3//",
					"-//ietf//dtd html level 3//",
					"-//ietf//dtd html strict level 0//",
					"-//ietf//dtd html strict level 0//",
					"-//ietf//dtd html strict le ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.JSDOMParser" id="apidoc.element.html5.JSDOMParser">
        function <span class="apidocSignatureSpan">html5.</span>JSDOMParser
        <span class="apidocSignatureSpan">(document, core)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function JSDOMParser(document, core) {
	this._treeBuilder = new JSDOMTreeBuilder(document, core);
	this._tokenizer = new Tokenizer(this._treeBuilder);
	this._scriptingEnabled = true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```javascript
var HTML5 = require('html5');
var jsdom = require('jsdom');
var core = jsdom.browserAugmentation(jsdom.level(3));

var impl = new core.DOMImplementation();
var document = impl.createDocument();
var parser = new HTML5.<span class="apidocCodeKeywordSpan">JSDOMParser</span>(document, core);

parser.parse('&lt;p&gt;I am a very small HTML document&lt;/p&gt;');

console.log(document.getElementsByTagName("p")[0].innerHTML);
```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.JSDOMTreeBuilder" id="apidoc.element.html5.JSDOMTreeBuilder">
        function <span class="apidocSignatureSpan">html5.</span>JSDOMTreeBuilder
        <span class="apidocSignatureSpan">(document, core)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function JSDOMTreeBuilder(document, core) {
	TreeBuilder.call(this);
	this.scriptingEnabled = true;
	this.document = document;
	this.core = core;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.SAXParser" id="apidoc.element.html5.SAXParser">
        function <span class="apidocSignatureSpan">html5.</span>SAXParser
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SAXParser() {
	this.contentHandler = null;
	this.lexicalHandler = null;
	this._errorHandler = null;
	this._treeBuilder = new SAXTreeBuilder();
	this._tokenizer = new Tokenizer(this._treeBuilder);
	this._scriptingEnabled = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.SAXTreeBuilder" id="apidoc.element.html5.SAXTreeBuilder">
        function <span class="apidocSignatureSpan">html5.</span>SAXTreeBuilder
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SAXTreeBuilder() {
	TreeBuilder.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.Tokenizer" id="apidoc.element.html5.Tokenizer">
        function <span class="apidocSignatureSpan">html5.</span>Tokenizer
        <span class="apidocSignatureSpan">(tokenHandler)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Tokenizer(tokenHandler) {
	this._tokenHandler = tokenHandler;
	this._state = Tokenizer.DATA;
	this._inputStream = new InputStream();
	this._currentToken = null;
	this._temporaryBuffer = '';
	this._additionalAllowedCharacter = '';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.html5.DOMParser" id="apidoc.module.html5.DOMParser">module html5.DOMParser</a></h1>


    <h2>
        <a href="#apidoc.element.html5.DOMParser.DOMParser" id="apidoc.element.html5.DOMParser.DOMParser">
        function <span class="apidocSignatureSpan">html5.</span>DOMParser
        <span class="apidocSignatureSpan">(implementation)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DOMParser(implementation) {
	this._treeBuilder = new DOMTreeBuilder(implementation);
	this._tokenizer = new Tokenizer(this._treeBuilder);
	this._scriptingEnabled = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.html5.DOMParser.prototype" id="apidoc.module.html5.DOMParser.prototype">module html5.DOMParser.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.html5.DOMParser.prototype.parse" id="apidoc.element.html5.DOMParser.prototype.parse">
        function <span class="apidocSignatureSpan">html5.DOMParser.prototype.</span>parse
        <span class="apidocSignatureSpan">(source)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parse = function (source) {
	this._tokenizer.tokenize(source);
	return this._treeBuilder.document;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var jsdom = require('jsdom');
var core = jsdom.browserAugmentation(jsdom.level(3));

var impl = new core.DOMImplementation();
var document = impl.createDocument();
var parser = new HTML5.JSDOMParser(document, core);

parser.<span class="apidocCodeKeywordSpan">parse</span>('&lt;p&gt;I am a very small HTML document&lt;/p&gt;');

console.log(document.getElementsByTagName("p")[0].innerHTML);
```


Interesting features
--------------------
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMParser.prototype.parseFragment" id="apidoc.element.html5.DOMParser.prototype.parseFragment">
        function <span class="apidocSignatureSpan">html5.DOMParser.prototype.</span>parseFragment
        <span class="apidocSignatureSpan">(source, context)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseFragment = function (source, context) {
	this._treeBuilder.setFragmentContext(context);
	this._tokenizer.tokenize(source);
	return this._treeBuilder.getFragment();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.html5.DOMTreeBuilder" id="apidoc.module.html5.DOMTreeBuilder">module html5.DOMTreeBuilder</a></h1>


    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.DOMTreeBuilder" id="apidoc.element.html5.DOMTreeBuilder.DOMTreeBuilder">
        function <span class="apidocSignatureSpan">html5.</span>DOMTreeBuilder
        <span class="apidocSignatureSpan">(implementation)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function DOMTreeBuilder(implementation) {
    this.implementation = implementation;
	TreeBuilder.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_" id="apidoc.element.html5.DOMTreeBuilder.super_">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function TreeBuilder() {
	this.tokenizer = null;
	this.errorHandler = null;
	this.scriptingEnabled = false;
	this.document = null;
	this.head = null;
	this.form = null;
	this.openElements = new ElementStack();
	this.activeFormattingElements = [];
	this.insertionMode = null;
	this.insertionModeName = "";
	this.originalInsertionMode = "";
	this.inQuirksMode = false; // TODO quirks mode
	this.compatMode = "no quirks";
	this.framesetOk = true;
	this.redirectAttachToFosterParent = false;
	this.selfClosingFlagAcknowledged = false;
	this.context = "";
	this.pendingTableCharacters = [];
	this.shouldSkipLeadingNewline = false;

	var tree = this;
	var modes = this.insertionModes = {};
	modes.base = {
		end_tag_handlers: {"-default": 'endTagOther'},
		start_tag_handlers: {"-default": 'startTagOther'},
		processEOF: function() {
			tree.generateImpliedEndTags();
			if (tree.openElements.length &gt; 2) {
				tree.parseError('expected-closing-tag-but-got-eof');
			} else if (tree.openElements.length == 2 &amp;&amp;
				tree.openElements.item(1).localName != 'body') {
				// This happens for framesets or something?
				tree.parseError('expected-closing-tag-but-got-eof');
			} else if (tree.context &amp;&amp; tree.openElements.length &gt; 1) {
				// XXX This is not what the specification says. Not sure what to do here.
				//tree.parseError('eof-in-innerhtml');
			}
		},
		processComment: function(data) {
			// For most phases the following is forceQuirks. Where it's not it will be
			// overridden.
			tree.insertComment(data, tree.currentStackItem().node);
		},
		processDoctype: function(name, publicId, systemId, forceQuirks) {
			tree.parseError('unexpected-doctype');
		},
		processStartTag: function(name, attributes, selfClosing) {
			if (this[this.start_tag_handlers[name]]) {
				this[this.start_tag_handlers[name]](name, attributes, selfClosing);
			} else if (this[this.start_tag_handlers["-default"]]) {
				this[this.start_tag_handlers["-default"]](name, attributes, selfClosing);
			} else {
				throw(new Error("No handler found for "+name));
			}
		},
		processEndTag: function(name) {
			if (this[this.end_tag_handlers[name]]) {
				this[this.end_tag_handlers[name]](name);
			} else if (this[this.end_tag_handlers["-default"]]) {
				this[this.end_tag_handlers["-default"]](name);
			} else {
				throw(new Error("No handler found for "+name));
			}
		},
		startTagHtml: function(name, attributes) {
			modes.inBody.startTagHtml(name, attributes);
		}
	};

	modes.initial = Object.create(modes.base);

	modes.initial.processEOF = function() {
		tree.parseError("expected-doctype-but-got-eof");
		this.anythingElse();
		tree.insertionMode.processEOF();
	};

	modes.initial.processComment = function(data) {
		tree.insertComment(data, tree.document);
	};

	modes.initial.processDoctype = function(name, publicId, systemId, forceQuirks) {
		tree.insertDoctype(name || '', publicId || '', systemId || '');

		if (forceQuirks || name != 'html' || (publicId != null &amp;&amp; ([
					"+//silmaril//dtd html pro v0r11 19970101//",
					"-//advasoft ltd//dtd html 3.0 aswedit + extensions//",
					"-//as//dtd html 3.0 aswedit + extensions//",
					"-//ietf//dtd html 2.0 level 1//",
					"-//ietf//dtd html 2.0 level 2//",
					"-//ietf//dtd html 2.0 strict level 1//",
					"-//ietf//dtd html 2.0 strict level 2//",
					"-//ietf//dtd html 2.0 strict//",
					"-//ietf//dtd html 2.0//",
					"-//ietf//dtd html 2.1e//",
					"-//ietf//dtd html 3.0//",
					"-//ietf//dtd html 3.0//",
					"-//ietf//dtd html 3.2 final//",
					"-//ietf//dtd html 3.2//",
					"-//ietf//dtd html 3//",
					"-//ietf//dtd html level 0//",
					"-//ietf//dtd html level 0//",
					"-//ietf//dtd html level 1//",
					"-//ietf//dtd html level 1//",
					"-//ietf//dtd html level 2//",
					"-//ietf//dtd html level 2//",
					"-//ietf//dtd html level 3//",
					"-//ietf//dtd html level 3//",
					"-//ietf//dtd html strict level 0//",
					"-//ietf//dtd html strict level 0//",
					"-//ietf//dtd html strict le ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.html5.DOMTreeBuilder.prototype" id="apidoc.module.html5.DOMTreeBuilder.prototype">module html5.DOMTreeBuilder.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.prototype.addAttributesToElement" id="apidoc.element.html5.DOMTreeBuilder.prototype.addAttributesToElement">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.prototype.</span>addAttributesToElement
        <span class="apidocSignatureSpan">(element, attributes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addAttributesToElement = function (element, attributes) {
	for (var i = 0; i &lt; attributes.length; i++) {
		if (!element.getAttributeNS(attributes[i].namespaceURI || null, attributes[i].nodeName)) {
			element.setAttributeNS(attributes[i].namespaceURI || null, attributes[i].nodeName, attributes[i].nodeValue);
		}
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		tree.insertText(characters);
		if (tree.framesetOk &amp;&amp; !isAllWhitespaceOrReplacementCharacters(characters))
			tree.framesetOk = false;
	};

	modes.inBody.startTagHtml = function(name, attributes) {
		tree.parseError('non-html-root');
		tree.<span class="apidocCodeKeywordSpan">addAttributesToElement</span>(tree.openElements.rootNode, attributes);
	};

	modes.inBody.startTagProcessInHead = function(name, attributes) {
		modes.inHead.processStartTag(name, attributes);
	};

	modes.inBody.startTagBody = function(name, attributes) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.prototype.appendCharacters" id="apidoc.element.html5.DOMTreeBuilder.prototype.appendCharacters">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.prototype.</span>appendCharacters
        <span class="apidocSignatureSpan">(parent, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">appendCharacters = function (parent, data) {
	var lastChild = parent.lastChild;
	if (lastChild &amp;&amp; lastChild.nodeType == lastChild.TEXT_NODE) {
		lastChild.appendData(data);
		return;
	}
	parent.appendChild(this.document.createTextNode(data));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

DOMTreeBuilder.prototype.insertText = function(data) {
	if (this.redirectAttachToFosterParent &amp;&amp; this.openElements.top.isFosterParenting()) {
		var tableIndex = this.openElements.findIndex('table');
		var tableItem = this.openElements.item(tableIndex);
		var table = tableItem.node;
		if (tableIndex === 0) {
			return this.<span class="apidocCodeKeywordSpan">appendCharacters</span>(table, data);
		}
		var parent = table.parentNode;
		if (parent) {
			var previousSibling = table.previousSibling;
			if (previousSibling &amp;&amp; previousSibling.nodeType === previousSibling.TEXT_NODE) {
				previousSibling.appendData(data);
				return;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.prototype.attachNode" id="apidoc.element.html5.DOMTreeBuilder.prototype.attachNode">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.prototype.</span>attachNode
        <span class="apidocSignatureSpan">(child, parent)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">attachNode = function (child, parent) {
	parent.appendChild(child);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			var newNode = new StackItem(node.namespaceURI, node.localName, node.attributes, clone);

			this.activeFormattingElements[this.activeFormattingElements.indexOf(node)] = newNode;
			this.openElements.elements[this.openElements.elements.indexOf(node)] = newNode;

			node = newNode;
			this.detachFromParent(lastNode.node);
			this.<span class="apidocCodeKeywordSpan">attachNode</span>(lastNode.node, node.node);
			lastNode = node;
		}

		this.detachFromParent(lastNode.node);
		if (commonAncestor.isFosterParenting()) {
			this.insertIntoFosterParent(lastNode.node);
		} else {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.prototype.attachNodeToFosterParent" id="apidoc.element.html5.DOMTreeBuilder.prototype.attachNodeToFosterParent">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.prototype.</span>attachNodeToFosterParent
        <span class="apidocSignatureSpan">(child, table, stackParent)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">attachNodeToFosterParent = function (child, table, stackParent) {
	var parent = table.parentNode;
	if (parent)
		parent.insertBefore(child, table);
	else
		stackParent.appendChild(child);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

TreeBuilder.prototype.insertIntoFosterParent = function(node) {
	var tableIndex = this.openElements.findIndex('table');
	var tableElement = this.openElements.item(tableIndex).node;
	if (tableIndex === 0)
		return this.attachNode(node, tableElement);
	this.<span class="apidocCodeKeywordSpan">attachNodeToFosterParent</span>(node, tableElement, this.openElements.item(tableIndex -
1).node);
};

TreeBuilder.prototype.insertElement = function(name, attributes, namespaceURI, selfClosing) {
	if (!namespaceURI)
		namespaceURI = "http://www.w3.org/1999/xhtml";
	var element = this.createElement(namespaceURI, name, attributes);
	if (this.shouldFosterParent())
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.prototype.createElement" id="apidoc.element.html5.DOMTreeBuilder.prototype.createElement">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.prototype.</span>createElement
        <span class="apidocSignatureSpan">(namespaceURI, localName, attributes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createElement = function (namespaceURI, localName, attributes) {
	var element = this.document.createElementNS(namespaceURI, localName);
	if (attributes) {
		for (var i = 0; i &lt; attributes.length; i++) {
			element.setAttributeNS(attributes[i].namespaceURI || null,
				attributes[i].nodeName, attributes[i].nodeValue);
		}
	}
	return element;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			}
			if (node == formattingElement)
				break;

			if (lastNode == furthestBlock)
				bookmark = this.activeFormattingElements.indexOf(node) + 1;

			var clone = this.<span class="apidocCodeKeywordSpan">createElement</span>(node.namespaceURI, node.localName, node.attributes);
			var newNode = new StackItem(node.namespaceURI, node.localName, node.attributes, clone);

			this.activeFormattingElements[this.activeFormattingElements.indexOf(node)] = newNode;
			this.openElements.elements[this.openElements.elements.indexOf(node)] = newNode;

			node = newNode;
			this.detachFromParent(lastNode.node);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.prototype.detachFromParent" id="apidoc.element.html5.DOMTreeBuilder.prototype.detachFromParent">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.prototype.</span>detachFromParent
        <span class="apidocSignatureSpan">(node)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">detachFromParent = function (node) {
	var parent = node.parentNode;
	if (parent)
		parent.removeChild(node);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	modes.inBody.startTagFrameset = function(name, attributes) {
		tree.parseError('unexpected-start-tag', {name: 'frameset'});
		if (tree.openElements.length == 1 ||
			tree.openElements.item(1).localName != 'body') {
			assert.ok(tree.context);
		} else if (tree.framesetOk) {
			tree.<span class="apidocCodeKeywordSpan">detachFromParent</span>(tree.openElements.bodyElement);
			while (tree.openElements.length &gt; 1)
				tree.openElements.pop();
			tree.insertElement(name, attributes);
			tree.setInsertionMode('inFrameset');
		}
	};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.prototype.insertComment" id="apidoc.element.html5.DOMTreeBuilder.prototype.insertComment">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.prototype.</span>insertComment
        <span class="apidocSignatureSpan">(data, parent)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insertComment = function (data, parent) {
	if (!parent)
		parent = this.currentStackItem().node();
	var comment = this.document.createComment(data);
	parent.appendChild(comment);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				// XXX This is not what the specification says. Not sure what to do here.
				//tree.parseError('eof-in-innerhtml');
			}
		},
		processComment: function(data) {
			// For most phases the following is forceQuirks. Where it's not it will be
			// overridden.
			tree.<span class="apidocCodeKeywordSpan">insertComment</span>(data, tree.currentStackItem().node);
		},
		processDoctype: function(name, publicId, systemId, forceQuirks) {
			tree.parseError('unexpected-doctype');
		},
		processStartTag: function(name, attributes, selfClosing) {
			if (this[this.start_tag_handlers[name]]) {
				this[this.start_tag_handlers[name]](name, attributes, selfClosing);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.prototype.insertDoctype" id="apidoc.element.html5.DOMTreeBuilder.prototype.insertDoctype">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.prototype.</span>insertDoctype
        <span class="apidocSignatureSpan">(name, publicId, systemId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insertDoctype = function (name, publicId, systemId) {
	var doctype = this.implementation.createDocumentType(name, publicId, systemId);
	this.document.appendChild(doctype);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	};

	modes.initial.processComment = function(data) {
		tree.insertComment(data, tree.document);
	};

	modes.initial.processDoctype = function(name, publicId, systemId, forceQuirks) {
		tree.<span class="apidocCodeKeywordSpan">insertDoctype</span>(name || '', publicId || '', systemId || '
;');

		if (forceQuirks || name != 'html' || (publicId != null &amp;&amp; ([
					"+//silmaril//dtd html pro v0r11 19970101//",
					"-//advasoft ltd//dtd html 3.0 aswedit + extensions//",
					"-//as//dtd html 3.0 aswedit + extensions//",
					"-//ietf//dtd html 2.0 level 1//",
					"-//ietf//dtd html 2.0 level 2//",
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.prototype.insertText" id="apidoc.element.html5.DOMTreeBuilder.prototype.insertText">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.prototype.</span>insertText
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insertText = function (data) {
	if (this.redirectAttachToFosterParent &amp;&amp; this.openElements.top.isFosterParenting()) {
		var tableIndex = this.openElements.findIndex('table');
		var tableItem = this.openElements.item(tableIndex);
		var table = tableItem.node;
		if (tableIndex === 0) {
			return this.appendCharacters(table, data);
		}
		var parent = table.parentNode;
		if (parent) {
			var previousSibling = table.previousSibling;
			if (previousSibling &amp;&amp; previousSibling.nodeType === previousSibling.TEXT_NODE) {
				previousSibling.appendData(data);
				return;
			}
			parent.insertBefore(this.document.createTextNode(data), table);
			return;
		}
		var stackParent = this.openElements.item(tableIndex - 1).node;
		var lastChild = stackParent.lastChild;
		if (listChild &amp;&amp; lastChild.nodeType == lastChild.TEXT_NODE) {
			lastChild.appendChild(data);
			return;
		}
		stackParent.appendChild(this.document.createTextNode(data));
		return;
	}
	this.appendCharacters(this.currentStackItem().node, data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		var whitespace = "";
		for (var i = 0; i &lt; characters.length; i++) {
			var ch = characters[i];
			if (isWhitespace(ch))
				whitespace += ch;
		}
		if (whitespace) {
			tree.<span class="apidocCodeKeywordSpan">insertText</span>(whitespace);
		}
		if (whitespace.length &lt; characters.length)
			tree.parseError('expected-eof-but-got-char');
	};

	modes.afterFrameset.startTagNoframes = function(name, attributes) {
		modes.inHead.processStartTag(name, attributes);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.prototype.reparentChildren" id="apidoc.element.html5.DOMTreeBuilder.prototype.reparentChildren">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.prototype.</span>reparentChildren
        <span class="apidocSignatureSpan">(oldParent, newParent)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reparentChildren = function (oldParent, newParent) {
	while (oldParent.hasChildNodes()) {
		newParent.appendChild(oldParent.firstChild);
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		} else {
			this.attachNode(lastNode.node, commonAncestor.node);
		}

		var clone = this.createElement("http://www.w3.org/1999/xhtml", formattingElement.localName, formattingElement.attributes
);
		var formattingClone = new StackItem(formattingElement.namespaceURI, formattingElement.localName, formattingElement.attributes,
clone);

		this.<span class="apidocCodeKeywordSpan">reparentChildren</span>(furthestBlock.node, clone);
		this.attachNode(clone, furthestBlock.node);

		this.removeElementFromActiveFormattingElements(formattingElement);
		this.activeFormattingElements.splice(Math.min(bookmark, this.activeFormattingElements.length), 0, formattingClone);

		this.openElements.remove(formattingElement);
		this.openElements.elements.splice(this.openElements.elements.indexOf(furthestBlock) + 1, 0, formattingClone);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.prototype.start" id="apidoc.element.html5.DOMTreeBuilder.prototype.start">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.prototype.</span>start
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">start = function () {
	this.document = this.implementation.createDocument(null, null, null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
TreeBuilder.prototype.startTokenization = function(tokenizer) {
	this.tokenizer = tokenizer;
	this.compatMode = "no quirks";
	this.originalInsertionMode = "initial";
	this.framesetOk = true;
	this.openElements = new ElementStack();
	this.activeFormattingElements = [];
	this.<span class="apidocCodeKeywordSpan">start</span>();
	if (this.context) {
		switch(this.context) {
		case 'title':
		case 'textarea':
			this.tokenizer.setState(Tokenizer.RCDATA);
			break;
		case 'style':
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.html5.DOMTreeBuilder.super_" id="apidoc.module.html5.DOMTreeBuilder.super_">module html5.DOMTreeBuilder.super_</a></h1>


    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.super_" id="apidoc.element.html5.DOMTreeBuilder.super_.super_">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function TreeBuilder() {
	this.tokenizer = null;
	this.errorHandler = null;
	this.scriptingEnabled = false;
	this.document = null;
	this.head = null;
	this.form = null;
	this.openElements = new ElementStack();
	this.activeFormattingElements = [];
	this.insertionMode = null;
	this.insertionModeName = "";
	this.originalInsertionMode = "";
	this.inQuirksMode = false; // TODO quirks mode
	this.compatMode = "no quirks";
	this.framesetOk = true;
	this.redirectAttachToFosterParent = false;
	this.selfClosingFlagAcknowledged = false;
	this.context = "";
	this.pendingTableCharacters = [];
	this.shouldSkipLeadingNewline = false;

	var tree = this;
	var modes = this.insertionModes = {};
	modes.base = {
		end_tag_handlers: {"-default": 'endTagOther'},
		start_tag_handlers: {"-default": 'startTagOther'},
		processEOF: function() {
			tree.generateImpliedEndTags();
			if (tree.openElements.length &gt; 2) {
				tree.parseError('expected-closing-tag-but-got-eof');
			} else if (tree.openElements.length == 2 &amp;&amp;
				tree.openElements.item(1).localName != 'body') {
				// This happens for framesets or something?
				tree.parseError('expected-closing-tag-but-got-eof');
			} else if (tree.context &amp;&amp; tree.openElements.length &gt; 1) {
				// XXX This is not what the specification says. Not sure what to do here.
				//tree.parseError('eof-in-innerhtml');
			}
		},
		processComment: function(data) {
			// For most phases the following is forceQuirks. Where it's not it will be
			// overridden.
			tree.insertComment(data, tree.currentStackItem().node);
		},
		processDoctype: function(name, publicId, systemId, forceQuirks) {
			tree.parseError('unexpected-doctype');
		},
		processStartTag: function(name, attributes, selfClosing) {
			if (this[this.start_tag_handlers[name]]) {
				this[this.start_tag_handlers[name]](name, attributes, selfClosing);
			} else if (this[this.start_tag_handlers["-default"]]) {
				this[this.start_tag_handlers["-default"]](name, attributes, selfClosing);
			} else {
				throw(new Error("No handler found for "+name));
			}
		},
		processEndTag: function(name) {
			if (this[this.end_tag_handlers[name]]) {
				this[this.end_tag_handlers[name]](name);
			} else if (this[this.end_tag_handlers["-default"]]) {
				this[this.end_tag_handlers["-default"]](name);
			} else {
				throw(new Error("No handler found for "+name));
			}
		},
		startTagHtml: function(name, attributes) {
			modes.inBody.startTagHtml(name, attributes);
		}
	};

	modes.initial = Object.create(modes.base);

	modes.initial.processEOF = function() {
		tree.parseError("expected-doctype-but-got-eof");
		this.anythingElse();
		tree.insertionMode.processEOF();
	};

	modes.initial.processComment = function(data) {
		tree.insertComment(data, tree.document);
	};

	modes.initial.processDoctype = function(name, publicId, systemId, forceQuirks) {
		tree.insertDoctype(name || '', publicId || '', systemId || '');

		if (forceQuirks || name != 'html' || (publicId != null &amp;&amp; ([
					"+//silmaril//dtd html pro v0r11 19970101//",
					"-//advasoft ltd//dtd html 3.0 aswedit + extensions//",
					"-//as//dtd html 3.0 aswedit + extensions//",
					"-//ietf//dtd html 2.0 level 1//",
					"-//ietf//dtd html 2.0 level 2//",
					"-//ietf//dtd html 2.0 strict level 1//",
					"-//ietf//dtd html 2.0 strict level 2//",
					"-//ietf//dtd html 2.0 strict//",
					"-//ietf//dtd html 2.0//",
					"-//ietf//dtd html 2.1e//",
					"-//ietf//dtd html 3.0//",
					"-//ietf//dtd html 3.0//",
					"-//ietf//dtd html 3.2 final//",
					"-//ietf//dtd html 3.2//",
					"-//ietf//dtd html 3//",
					"-//ietf//dtd html level 0//",
					"-//ietf//dtd html level 0//",
					"-//ietf//dtd html level 1//",
					"-//ietf//dtd html level 1//",
					"-//ietf//dtd html level 2//",
					"-//ietf//dtd html level 2//",
					"-//ietf//dtd html level 3//",
					"-//ietf//dtd html level 3//",
					"-//ietf//dtd html strict level 0//",
					"-//ietf//dtd html strict level 0//",
					"-//ietf//dtd html strict le ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.html5.DOMTreeBuilder.super_.prototype" id="apidoc.module.html5.DOMTreeBuilder.super_.prototype">module html5.DOMTreeBuilder.super_.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.addAttributesToElement" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.addAttributesToElement">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>addAttributesToElement
        <span class="apidocSignatureSpan">(element, attributes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addAttributesToElement = function (element, attributes) {
	throw new Error("Not implemented");
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		tree.insertText(characters);
		if (tree.framesetOk &amp;&amp; !isAllWhitespaceOrReplacementCharacters(characters))
			tree.framesetOk = false;
	};

	modes.inBody.startTagHtml = function(name, attributes) {
		tree.parseError('non-html-root');
		tree.<span class="apidocCodeKeywordSpan">addAttributesToElement</span>(tree.openElements.rootNode, attributes);
	};

	modes.inBody.startTagProcessInHead = function(name, attributes) {
		modes.inHead.processStartTag(name, attributes);
	};

	modes.inBody.startTagBody = function(name, attributes) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.adjustForeignAttributes" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.adjustForeignAttributes">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>adjustForeignAttributes
        <span class="apidocSignatureSpan">(attributes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">adjustForeignAttributes = function (attributes) {
	for (var i = 0; i &lt; attributes.length; i++) {
		var attribute = attributes[i];
		var adjusted = constants.ForeignAttributeMap[attribute.nodeName];
		if (adjusted) {
			attribute.nodeName = adjusted.localName;
			attribute.prefix = adjusted.prefix;
			attribute.namespaceURI = adjusted.namespaceURI;
		}
	}
	return attributes;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			}
		}
	};

	modes.inBody.startTagMath = function(name, attributes, selfClosing) {
		tree.reconstructActiveFormattingElements();
		attributes = tree.adjustMathMLAttributes(attributes);
		attributes = tree.<span class="apidocCodeKeywordSpan">adjustForeignAttributes</span>(attributes);
		tree.insertForeignElement(name, attributes, "http://www.w3.org/1998/Math/MathML", selfClosing);
		// Need to get the parse error right for the case where the token
		// has a namespace not equal to the xmlns attribute
	};

	modes.inBody.startTagSVG = function(name, attributes, selfClosing) {
		tree.reconstructActiveFormattingElements();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.adjustMathMLAttributes" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.adjustMathMLAttributes">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>adjustMathMLAttributes
        <span class="apidocSignatureSpan">(attributes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">adjustMathMLAttributes = function (attributes) {
	attributes.forEach(function(a) {
		a.namespaceURI = "http://www.w3.org/1998/Math/MathML";
		if (constants.MATHMLAttributeMap[a.nodeName])
			a.nodeName = constants.MATHMLAttributeMap[a.nodeName];
	});
	return attributes;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				break;
			}
		}
	};

	modes.inBody.startTagMath = function(name, attributes, selfClosing) {
		tree.reconstructActiveFormattingElements();
		attributes = tree.<span class="apidocCodeKeywordSpan">adjustMathMLAttributes</span>(attributes);
		attributes = tree.adjustForeignAttributes(attributes);
		tree.insertForeignElement(name, attributes, "http://www.w3.org/1998/Math/MathML", selfClosing);
		// Need to get the parse error right for the case where the token
		// has a namespace not equal to the xmlns attribute
	};

	modes.inBody.startTagSVG = function(name, attributes, selfClosing) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.adjustSVGAttributes" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.adjustSVGAttributes">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>adjustSVGAttributes
        <span class="apidocSignatureSpan">(attributes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">adjustSVGAttributes = function (attributes) {
	attributes.forEach(function(a) {
		a.namespaceURI = "http://www.w3.org/2000/svg";
		if (constants.SVGAttributeMap[a.nodeName])
			a.nodeName = constants.SVGAttributeMap[a.nodeName];
	});
	return attributes;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		tree.insertForeignElement(name, attributes, "http://www.w3.org/1998/Math/MathML", selfClosing);
		// Need to get the parse error right for the case where the token
		// has a namespace not equal to the xmlns attribute
	};

	modes.inBody.startTagSVG = function(name, attributes, selfClosing) {
		tree.reconstructActiveFormattingElements();
		attributes = tree.<span class="apidocCodeKeywordSpan">adjustSVGAttributes</span>(attributes);
		attributes = tree.adjustForeignAttributes(attributes);
		tree.insertForeignElement(name, attributes, "http://www.w3.org/2000/svg", selfClosing);
		// Need to get the parse error right for the case where the token
		// has a namespace not equal to the xmlns attribute
	};

	modes.inBody.endTagP = function(name) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.adjustSVGTagNameCase" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.adjustSVGTagNameCase">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>adjustSVGTagNameCase
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">adjustSVGTagNameCase = function (name) {
	return constants.SVGTagMap[name] || name;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			tree.insertionMode.processStartTag(name, attributes, selfClosing);
			return;
		}
		if (tree.currentStackItem().namespaceURI == "http://www.w3.org/1998/Math/MathML") {
			attributes = tree.adjustMathMLAttributes(attributes);
		}
		if (tree.currentStackItem().namespaceURI == "http://www.w3.org/2000/svg") {
			name = tree.<span class="apidocCodeKeywordSpan">adjustSVGTagNameCase</span>(name);
			attributes = tree.adjustSVGAttributes(attributes);
		}
		attributes = tree.adjustForeignAttributes(attributes);
		tree.insertForeignElement(name, attributes, tree.currentStackItem().namespaceURI, selfClosing);
	};

	modes.inForeignContent.processEndTag = function(name) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.adoptionAgencyEndTag" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.adoptionAgencyEndTag">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>adoptionAgencyEndTag
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">adoptionAgencyEndTag = function (name) {
	var outerIterationLimit = 8;
	var innerIterationLimit = 3;
	var formattingElement;

	function isActiveFormattingElement(el) {
		return el === formattingElement;
	}

	var outerLoopCounter = 0;

	while (outerLoopCounter++ &lt; outerIterationLimit) {
		// 4.
		formattingElement = this.elementInActiveFormattingElements(name);

		if (!formattingElement || (this.openElements.contains(formattingElement) &amp;&amp; !this.openElements.inScope(formattingElement.localName
))) {
			this.parseError('adoption-agency-1.1', {name: name});
			return false;
		}
		if (!this.openElements.contains(formattingElement)) {
			this.parseError('adoption-agency-1.2', {name: name});
			this.removeElementFromActiveFormattingElements(formattingElement);
			return true;
		}
		if (!this.openElements.inScope(formattingElement.localName)) {
			this.parseError('adoption-agency-4.4', {name: name});
		}

		if (formattingElement != this.currentStackItem()) {
			this.parseError('adoption-agency-1.3', {name: name});
		}

		// Start of the adoption agency algorithm proper
		// todo ElementStack
		var furthestBlock = this.openElements.furthestBlockForFormattingElement(formattingElement.node);

		if (!furthestBlock) {
			this.openElements.remove_openElements_until(isActiveFormattingElement);
			this.removeElementFromActiveFormattingElements(formattingElement);
			return true;
		}

		var afeIndex = this.openElements.elements.indexOf(formattingElement);
		var commonAncestor = this.openElements.item(afeIndex - 1);

		var bookmark = this.activeFormattingElements.indexOf(formattingElement);

		var node = furthestBlock;
		var lastNode = furthestBlock;
		var index = this.openElements.elements.indexOf(node);

		var innerLoopCounter = 0;
		while (innerLoopCounter++ &lt; innerIterationLimit) {
			index -= 1;
			node = this.openElements.item(index);
			if (this.activeFormattingElements.indexOf(node) &lt; 0) {
				this.openElements.elements.splice(index, 1);
				continue;
			}
			if (node == formattingElement)
				break;

			if (lastNode == furthestBlock)
				bookmark = this.activeFormattingElements.indexOf(node) + 1;

			var clone = this.createElement(node.namespaceURI, node.localName, node.attributes);
			var newNode = new StackItem(node.namespaceURI, node.localName, node.attributes, clone);

			this.activeFormattingElements[this.activeFormattingElements.indexOf(node)] = newNode;
			this.openElements.elements[this.openElements.elements.indexOf(node)] = newNode;

			node = newNode;
			this.detachFromParent(lastNode.node);
			this.attachNode(lastNode.node, node.node);
			lastNode = node;
		}

		this.detachFromParent(lastNode.node);
		if (commonAncestor.isFosterParenting()) {
			this.insertIntoFosterParent(lastNode.node);
		} else {
			this.attachNode(lastNode.node, commonAncestor.node);
		}

		var clone = this.createElement("http://www.w3.org/1999/xhtml", formattingElement.localName, formattingElement.attributes);
		var formattingClone = new StackItem(formattingElement.namespaceURI, formattingElement.localName, formattingElement.attributes,
clone);

		this.reparentChildren(furthestBlock.node, clone);
		this.attachNode(clone, furthestBlock.node);

		this.removeElementFromActiveFormattingElements(formattingElement);
		this.activeFormattingElements.splice(Math.min(bookmark, this.activeFormattingElements.length), 0, formattingClone);

		this.openElements.remove(formattingElement);
		this.openElements.elements.splice(this.openElements.elements.indexOf(furthestBlock) + 1, 0, formattingClone);
	}

	return true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		tree.insertElement(name, attributes);
	};

	modes.inBody.startTagA = function(name, attributes) {
		var activeA = tree.elementInActiveFormattingElements('a');
		if (activeA) {
			tree.parseError("unexpected-start-tag-implies-end-tag", {startName: "a", endName: "a"});
			tree.<span class="apidocCodeKeywordSpan">adoptionAgencyEndTag</span>('a');
			if (tree.openElements.contains(activeA))
				tree.openElements.remove(activeA);
			tree.removeElementFromActiveFormattingElements(activeA);
		}
		tree.reconstructActiveFormattingElements();
		tree.insertFormattingElement(name, attributes);
	};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.appendElementToActiveFormattingElements" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.appendElementToActiveFormattingElements">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>appendElementToActiveFormattingElements
        <span class="apidocSignatureSpan">(item)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">appendElementToActiveFormattingElements = function (item) {
	this.ensureNoahsArkCondition(item);
	this.activeFormattingElements.push(item);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		this.attachNode(element, this.openElements.top.node);
	if (!selfClosing)
		this.openElements.push(new StackItem(namespaceURI, name, attributes, element));
};

TreeBuilder.prototype.insertFormattingElement = function(name, attributes) {
	this.insertElement(name, attributes, "http://www.w3.org/1999/xhtml");
	this.<span class="apidocCodeKeywordSpan">appendElementToActiveFormattingElements</span>(this.currentStackItem());
};

TreeBuilder.prototype.insertSelfClosingElement = function(name, attributes) {
	this.selfClosingFlagAcknowledged = true;
	this.insertElement(name, attributes, "http://www.w3.org/1999/xhtml", true);
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.attachNode" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.attachNode">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>attachNode
        <span class="apidocSignatureSpan">(child, parent)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">attachNode = function (child, parent) {
	throw new Error("Not implemented");
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			var newNode = new StackItem(node.namespaceURI, node.localName, node.attributes, clone);

			this.activeFormattingElements[this.activeFormattingElements.indexOf(node)] = newNode;
			this.openElements.elements[this.openElements.elements.indexOf(node)] = newNode;

			node = newNode;
			this.detachFromParent(lastNode.node);
			this.<span class="apidocCodeKeywordSpan">attachNode</span>(lastNode.node, node.node);
			lastNode = node;
		}

		this.detachFromParent(lastNode.node);
		if (commonAncestor.isFosterParenting()) {
			this.insertIntoFosterParent(lastNode.node);
		} else {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.attachNodeToFosterParent" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.attachNodeToFosterParent">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>attachNodeToFosterParent
        <span class="apidocSignatureSpan">(child, table, stackParent)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">attachNodeToFosterParent = function (child, table, stackParent) {
	throw new Error("Not implemented");
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

TreeBuilder.prototype.insertIntoFosterParent = function(node) {
	var tableIndex = this.openElements.findIndex('table');
	var tableElement = this.openElements.item(tableIndex).node;
	if (tableIndex === 0)
		return this.attachNode(node, tableElement);
	this.<span class="apidocCodeKeywordSpan">attachNodeToFosterParent</span>(node, tableElement, this.openElements.item(tableIndex -
1).node);
};

TreeBuilder.prototype.insertElement = function(name, attributes, namespaceURI, selfClosing) {
	if (!namespaceURI)
		namespaceURI = "http://www.w3.org/1999/xhtml";
	var element = this.createElement(namespaceURI, name, attributes);
	if (this.shouldFosterParent())
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.clearActiveFormattingElements" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.clearActiveFormattingElements">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>clearActiveFormattingElements
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clearActiveFormattingElements = function () {
    while (!(this.activeFormattingElements.length === 0 || this.activeFormattingElements.pop() == Marker));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			tree.parseError("unexpected-end-tag", {name: name});
		} else {
			tree.generateImpliedEndTags();
			if (tree.currentStackItem().localName != name) {
				tree.parseError('end-tag-too-early', {name: name});
			}
			tree.openElements.popUntilPopped(name);
			tree.<span class="apidocCodeKeywordSpan">clearActiveFormattingElements</span>();
		}
	};

	modes.inBody.startTagXmp = function(name, attributes) {
		if (tree.openElements.inButtonScope('p'))
			this.processEndTag('p');
		tree.reconstructActiveFormattingElements();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.createElement" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.createElement">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>createElement
        <span class="apidocSignatureSpan">(namespaceURI, localName, attributes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createElement = function (namespaceURI, localName, attributes) {
	throw new Error("Not implemented");
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			}
			if (node == formattingElement)
				break;

			if (lastNode == furthestBlock)
				bookmark = this.activeFormattingElements.indexOf(node) + 1;

			var clone = this.<span class="apidocCodeKeywordSpan">createElement</span>(node.namespaceURI, node.localName, node.attributes);
			var newNode = new StackItem(node.namespaceURI, node.localName, node.attributes, clone);

			this.activeFormattingElements[this.activeFormattingElements.indexOf(node)] = newNode;
			this.openElements.elements[this.openElements.elements.indexOf(node)] = newNode;

			node = newNode;
			this.detachFromParent(lastNode.node);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.currentStackItem" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.currentStackItem">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>currentStackItem
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">currentStackItem = function () {
	return this.openElements.top;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				// XXX This is not what the specification says. Not sure what to do here.
				//tree.parseError('eof-in-innerhtml');
			}
		},
		processComment: function(data) {
			// For most phases the following is forceQuirks. Where it's not it will be
			// overridden.
			tree.insertComment(data, tree.<span class="apidocCodeKeywordSpan">currentStackItem</span>().node);
		},
		processDoctype: function(name, publicId, systemId, forceQuirks) {
			tree.parseError('unexpected-doctype');
		},
		processStartTag: function(name, attributes, selfClosing) {
			if (this[this.start_tag_handlers[name]]) {
				this[this.start_tag_handlers[name]](name, attributes, selfClosing);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.detachFromParent" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.detachFromParent">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>detachFromParent
        <span class="apidocSignatureSpan">(node)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">detachFromParent = function (node) {
	throw new Error("Not implemented");
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	modes.inBody.startTagFrameset = function(name, attributes) {
		tree.parseError('unexpected-start-tag', {name: 'frameset'});
		if (tree.openElements.length == 1 ||
			tree.openElements.item(1).localName != 'body') {
			assert.ok(tree.context);
		} else if (tree.framesetOk) {
			tree.<span class="apidocCodeKeywordSpan">detachFromParent</span>(tree.openElements.bodyElement);
			while (tree.openElements.length &gt; 1)
				tree.openElements.pop();
			tree.insertElement(name, attributes);
			tree.setInsertionMode('inFrameset');
		}
	};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.elementInActiveFormattingElements" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.elementInActiveFormattingElements">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>elementInActiveFormattingElements
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">elementInActiveFormattingElements = function (name) {
	var els = this.activeFormattingElements;
	for (var i = els.length - 1; i &gt;= 0; i--) {
		if (els[i] == Marker) break;
		if (els[i].localName == name) return els[i];
	}
	return false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			tree.parseError('unexpected-start-tag', {name: name});
			tree.popElement();
		}
		tree.insertElement(name, attributes);
	};

	modes.inBody.startTagA = function(name, attributes) {
		var activeA = tree.<span class="apidocCodeKeywordSpan">elementInActiveFormattingElements</span>('a');
		if (activeA) {
			tree.parseError("unexpected-start-tag-implies-end-tag", {startName: "a", endName: "a"});
			tree.adoptionAgencyEndTag('a');
			if (tree.openElements.contains(activeA))
				tree.openElements.remove(activeA);
			tree.removeElementFromActiveFormattingElements(activeA);
		}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.ensureNoahsArkCondition" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.ensureNoahsArkCondition">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>ensureNoahsArkCondition
        <span class="apidocSignatureSpan">(item)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ensureNoahsArkCondition = function (item) {
	var kNoahsArkCapacity = 3;
	if (this.activeFormattingElements.length &lt; kNoahsArkCapacity)
		return;
	var candidates = [];
	var newItemAttributeCount = item.attributes.length;
	for (var i = this.activeFormattingElements.length - 1; i &gt;= 0; i--) {
		var candidate = this.activeFormattingElements[i];
		if (candidate === Marker)
			break;
		if (item.localName !== candidate.localName || item.namespaceURI !== candidate.namespaceURI)
			continue;
		if (candidate.attributes.length != newItemAttributeCount)
			continue;
		candidates.push(candidate);
	}
	if (candidates.length &lt; kNoahsArkCapacity)
		return;

	var remainingCandidates = [];
	var attributes = item.attributes;
	for (var i = 0; i &lt; attributes.length; i++) {
		var attribute = attributes[i];

		for (var j = 0; j &lt; candidates.length; j++) {
			var candidate = candidates[j];
			var candidateAttribute = getAttribute(candidate, attribute.nodeName);
			if (candidateAttribute &amp;&amp; candidateAttribute.nodeValue === attribute.nodeValue)
				remainingCandidates.push(candidate);
		}
		if (remainingCandidates.length &lt; kNoahsArkCapacity)
			return;
		candidates = remainingCandidates;
		remainingCandidates = [];
	}
	// Inductively, we shouldn't spin this loop very many times. It's possible,
	// however, that we wil spin the loop more than once because of how the
	// formatting element list gets permuted.
	for (var i = kNoahsArkCapacity - 1; i &lt; candidates.length; i++)
		this.removeElementFromActiveFormattingElements(candidates[i]);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

/**
*
* @param {StackItem} item
*/
TreeBuilder.prototype.appendElementToActiveFormattingElements = function(item) {
	this.<span class="apidocCodeKeywordSpan">ensureNoahsArkCondition</span>(item);
	this.activeFormattingElements.push(item);
};

/**
*
* @param {StackItem} item
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.generateImpliedEndTags" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.generateImpliedEndTags">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>generateImpliedEndTags
        <span class="apidocSignatureSpan">(exclude)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">generateImpliedEndTags = function (exclude) {
	// FIXME get rid of the recursion
	var name = this.openElements.top.localName;
	if (['dd', 'dt', 'li', 'option', 'optgroup', 'p', 'rp', 'rt'].indexOf(name) != -1 &amp;&amp; name != exclude) {
		this.popElement();
		this.generateImpliedEndTags(exclude);
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	var tree = this;
	var modes = this.insertionModes = {};
	modes.base = {
		end_tag_handlers: {"-default": 'endTagOther'},
		start_tag_handlers: {"-default": 'startTagOther'},
		processEOF: function() {
			tree.<span class="apidocCodeKeywordSpan">generateImpliedEndTags</span>();
			if (tree.openElements.length &gt; 2) {
				tree.parseError('expected-closing-tag-but-got-eof');
			} else if (tree.openElements.length == 2 &amp;&amp;
				tree.openElements.item(1).localName != 'body') {
				// This happens for framesets or something?
				tree.parseError('expected-closing-tag-but-got-eof');
			} else if (tree.context &amp;&amp; tree.openElements.length &gt; 1) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.getFragment" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.getFragment">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>getFragment
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getFragment = function () {
	var fragment = this.document.createDocumentFragment();
	this.reparentChildren(this.openElements.rootNode, fragment);
	return fragment;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	this._tokenizer.tokenize(source);
	return this._treeBuilder.document;
};

DOMParser.prototype.parseFragment = function(source, context) {
	this._treeBuilder.setFragmentContext(context);
	this._tokenizer.tokenize(source);
	return this._treeBuilder.<span class="apidocCodeKeywordSpan">getFragment</span>();
};

Object.defineProperty(DOMParser.prototype, 'scriptingEnabled', {
	get: function() {
		return this._scriptingEnabled;
	},
	set: function(value) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertBodyElement" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertBodyElement">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>insertBodyElement
        <span class="apidocSignatureSpan">(attributes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insertBodyElement = function (attributes) {
	var element = this.createElement("http://www.w3.org/1999/xhtml", "body", attributes);
	this.attachNode(element, this.openElements.top.node);
	this.openElements.pushBodyElement(new StackItem("http://www.w3.org/1999/xhtml", "body", attributes, element));
	return element;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	modes.afterHead.startTagHtml = function(name, attributes) {
		modes.inBody.processStartTag(name, attributes);
	};

	modes.afterHead.startTagBody = function(name, attributes) {
		tree.framesetOk = false;
		tree.<span class="apidocCodeKeywordSpan">insertBodyElement</span>(attributes);
		tree.setInsertionMode('inBody');
	};

	modes.afterHead.startTagFrameset = function(name, attributes) {
		tree.insertElement(name, attributes);
		tree.setInsertionMode('inFrameset');
	};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertComment" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertComment">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>insertComment
        <span class="apidocSignatureSpan">(data, parent)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insertComment = function (data, parent) {
	throw new Error("Not implemented");
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				// XXX This is not what the specification says. Not sure what to do here.
				//tree.parseError('eof-in-innerhtml');
			}
		},
		processComment: function(data) {
			// For most phases the following is forceQuirks. Where it's not it will be
			// overridden.
			tree.<span class="apidocCodeKeywordSpan">insertComment</span>(data, tree.currentStackItem().node);
		},
		processDoctype: function(name, publicId, systemId, forceQuirks) {
			tree.parseError('unexpected-doctype');
		},
		processStartTag: function(name, attributes, selfClosing) {
			if (this[this.start_tag_handlers[name]]) {
				this[this.start_tag_handlers[name]](name, attributes, selfClosing);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertDoctype" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertDoctype">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>insertDoctype
        <span class="apidocSignatureSpan">(name, publicId, systemId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insertDoctype = function (name, publicId, systemId) {
	throw new Error("Not implemented");
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	};

	modes.initial.processComment = function(data) {
		tree.insertComment(data, tree.document);
	};

	modes.initial.processDoctype = function(name, publicId, systemId, forceQuirks) {
		tree.<span class="apidocCodeKeywordSpan">insertDoctype</span>(name || '', publicId || '', systemId || '
;');

		if (forceQuirks || name != 'html' || (publicId != null &amp;&amp; ([
					"+//silmaril//dtd html pro v0r11 19970101//",
					"-//advasoft ltd//dtd html 3.0 aswedit + extensions//",
					"-//as//dtd html 3.0 aswedit + extensions//",
					"-//ietf//dtd html 2.0 level 1//",
					"-//ietf//dtd html 2.0 level 2//",
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertElement" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertElement">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>insertElement
        <span class="apidocSignatureSpan">(name, attributes, namespaceURI, selfClosing)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insertElement = function (name, attributes, namespaceURI, selfClosing) {
	if (!namespaceURI)
		namespaceURI = "http://www.w3.org/1999/xhtml";
	var element = this.createElement(namespaceURI, name, attributes);
	if (this.shouldFosterParent())
		this.insertIntoFosterParent(element);
	else
		this.attachNode(element, this.openElements.top.node);
	if (!selfClosing)
		this.openElements.push(new StackItem(namespaceURI, name, attributes, element));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	modes.inHead.startTagTitle = function(name, attributes) {
		tree.processGenericRCDATAStartTag(name, attributes);
	};

	modes.inHead.startTagNoScript = function(name, attributes) {
		if (tree.scriptingEnabled)
			return tree.processGenericRawTextStartTag(name, attributes);
		tree.<span class="apidocCodeKeywordSpan">insertElement</span>(name, attributes);
		tree.setInsertionMode('inHeadNoscript');
	};

	modes.inHead.startTagNoFramesStyle = function(name, attributes) {
		// XXX Need to decide whether to implement the scripting disabled case
		tree.processGenericRawTextStartTag(name, attributes);
	};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertForeignElement" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertForeignElement">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>insertForeignElement
        <span class="apidocSignatureSpan">(name, attributes, namespaceURI, selfClosing)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insertForeignElement = function (name, attributes, namespaceURI, selfClosing) {
	if (selfClosing)
		this.selfClosingFlagAcknowledged = true;
	this.insertElement(name, attributes, namespaceURI, selfClosing);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		}
	};

	modes.inBody.startTagMath = function(name, attributes, selfClosing) {
		tree.reconstructActiveFormattingElements();
		attributes = tree.adjustMathMLAttributes(attributes);
		attributes = tree.adjustForeignAttributes(attributes);
		tree.<span class="apidocCodeKeywordSpan">insertForeignElement</span>(name, attributes, "http://www.w3.org/1998/Math/MathML
", selfClosing);
		// Need to get the parse error right for the case where the token
		// has a namespace not equal to the xmlns attribute
	};

	modes.inBody.startTagSVG = function(name, attributes, selfClosing) {
		tree.reconstructActiveFormattingElements();
		attributes = tree.adjustSVGAttributes(attributes);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertFormattingElement" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertFormattingElement">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>insertFormattingElement
        <span class="apidocSignatureSpan">(name, attributes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insertFormattingElement = function (name, attributes) {
	this.insertElement(name, attributes, "http://www.w3.org/1999/xhtml");
	this.appendElementToActiveFormattingElements(this.currentStackItem());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			tree.parseError("unexpected-start-tag-implies-end-tag", {startName: "a", endName: "a"});
			tree.adoptionAgencyEndTag('a');
			if (tree.openElements.contains(activeA))
				tree.openElements.remove(activeA);
			tree.removeElementFromActiveFormattingElements(activeA);
		}
		tree.reconstructActiveFormattingElements();
		tree.<span class="apidocCodeKeywordSpan">insertFormattingElement</span>(name, attributes);
	};

	modes.inBody.startTagFormatting = function(name, attributes) {
		tree.reconstructActiveFormattingElements();
		tree.insertFormattingElement(name, attributes);
	};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertHeadElement" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertHeadElement">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>insertHeadElement
        <span class="apidocSignatureSpan">(attributes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insertHeadElement = function (attributes) {
	var element = this.createElement("http://www.w3.org/1999/xhtml", "head", attributes);
	this.head = new StackItem("http://www.w3.org/1999/xhtml", "head", attributes, element);
	this.attachNode(element, this.openElements.top.node);
	this.openElements.pushHeadElement(this.head);
	return element;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		if (!buffer.length)
			return;
		this.startTagHead('head', []);
		tree.insertionMode.processCharacters(buffer);
	};

	modes.beforeHead.startTagHead = function(name, attributes) {
		tree.<span class="apidocCodeKeywordSpan">insertHeadElement</span>(attributes);
		tree.setInsertionMode('inHead');
	};

	modes.beforeHead.startTagOther = function(name, attributes, selfClosing) {
		this.startTagHead('head', []);
		tree.insertionMode.processStartTag(name, attributes, selfClosing);
	};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertHtmlElement" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertHtmlElement">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>insertHtmlElement
        <span class="apidocSignatureSpan">(attributes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insertHtmlElement = function (attributes) {
	var root = this.createElement("http://www.w3.org/1999/xhtml", 'html', attributes);
	this.attachNode(root, this.document);
	this.openElements.pushHtmlElement(new StackItem("http://www.w3.org/1999/xhtml", 'html', attributes, root));
	return root;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		if (!buffer.length)
			return;
		this.anythingElse();
		tree.insertionMode.processCharacters(buffer);
	};

	modes.beforeHTML.startTagHtml = function(name, attributes, selfClosing) {
		tree.<span class="apidocCodeKeywordSpan">insertHtmlElement</span>(attributes);
		tree.setInsertionMode('beforeHead');
	};

	modes.beforeHTML.startTagOther = function(name, attributes, selfClosing) {
		this.anythingElse();
		tree.insertionMode.processStartTag(name, attributes, selfClosing);
	};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertIntoFosterParent" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertIntoFosterParent">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>insertIntoFosterParent
        <span class="apidocSignatureSpan">(node)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insertIntoFosterParent = function (node) {
	var tableIndex = this.openElements.findIndex('table');
	var tableElement = this.openElements.item(tableIndex).node;
	if (tableIndex === 0)
		return this.attachNode(node, tableElement);
	this.attachNodeToFosterParent(node, tableElement, this.openElements.item(tableIndex - 1).node);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			this.detachFromParent(lastNode.node);
			this.attachNode(lastNode.node, node.node);
			lastNode = node;
		}

		this.detachFromParent(lastNode.node);
		if (commonAncestor.isFosterParenting()) {
			this.<span class="apidocCodeKeywordSpan">insertIntoFosterParent</span>(lastNode.node);
		} else {
			this.attachNode(lastNode.node, commonAncestor.node);
		}

		var clone = this.createElement("http://www.w3.org/1999/xhtml", formattingElement.localName, formattingElement.attributes
);
		var formattingClone = new StackItem(formattingElement.namespaceURI, formattingElement.localName, formattingElement.attributes,
clone);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertSelfClosingElement" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertSelfClosingElement">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>insertSelfClosingElement
        <span class="apidocSignatureSpan">(name, attributes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insertSelfClosingElement = function (name, attributes) {
	this.selfClosingFlagAcknowledged = true;
	this.insertElement(name, attributes, "http://www.w3.org/1999/xhtml", true);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		tree.insertElement(name, attributes);
		tree.tokenizer.setState(Tokenizer.SCRIPT_DATA);
		tree.originalInsertionMode = tree.insertionModeName;
		tree.setInsertionMode('text');
	};

	modes.inHead.startTagBaseBasefontBgsoundLink = function(name, attributes) {
		tree.<span class="apidocCodeKeywordSpan">insertSelfClosingElement</span>(name, attributes);
	};

	modes.inHead.startTagMeta = function(name, attributes) {
		tree.insertSelfClosingElement(name, attributes);
		// @todo process charset attributes
	};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertText" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.insertText">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>insertText
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insertText = function (data) {
	throw new Error("Not implemented");
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		var whitespace = "";
		for (var i = 0; i &lt; characters.length; i++) {
			var ch = characters[i];
			if (isWhitespace(ch))
				whitespace += ch;
		}
		if (whitespace) {
			tree.<span class="apidocCodeKeywordSpan">insertText</span>(whitespace);
		}
		if (whitespace.length &lt; characters.length)
			tree.parseError('expected-eof-but-got-char');
	};

	modes.afterFrameset.startTagNoframes = function(name, attributes) {
		modes.inHead.processStartTag(name, attributes);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.isCdataSectionAllowed" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.isCdataSectionAllowed">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>isCdataSectionAllowed
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isCdataSectionAllowed = function () {
	return this.openElements.length &gt; 0 &amp;&amp; this.currentStackItem().isForeign();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				return true;
			}

			chars += newchars;
			if (chars.toUpperCase() === 'DOCTYPE') {
				tokenizer._currentToken = {type: 'Doctype', name: '', publicId: null, systemId: null, forceQuirks: false
};
				tokenizer.setState(doctype_state);
			} else if (tokenizer._tokenHandler.<span class="apidocCodeKeywordSpan">isCdataSectionAllowed</span>() &amp;&amp; chars === &amp;#
x27;[CDATA[') {
				tokenizer.setState(cdata_section_state);
			} else {
				tokenizer._parseError("expected-dashes-or-doctype");
				buffer.unget(chars);
				tokenizer.setState(bogus_comment_state);
			}
		}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.isSelfClosingFlagAcknowledged" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.isSelfClosingFlagAcknowledged">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>isSelfClosingFlagAcknowledged
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isSelfClosingFlagAcknowledged = function () {
	return this.selfClosingFlagAcknowledged;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			this._parseError('self-closing-flag-on-end-tag');
		}
		if (token.data.length !== 0) {
			this._parseError('attributes-in-end-tag');
		}
	}
	this._tokenHandler.processToken(token);
	if (token.type === 'StartTag' &amp;&amp; token.selfClosing &amp;&amp; !this._tokenHandler.<span class="apidocCodeKeywordSpan
">isSelfClosingFlagAcknowledged</span>()) {
		this._parseError('non-void-element-with-trailing-solidus', {name: token.name});
	}
};

Tokenizer.prototype._emitCurrentToken = function() {
	this._state = Tokenizer.DATA;
	this._emitToken(this._currentToken);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.parseError" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.parseError">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>parseError
        <span class="apidocSignatureSpan">(code, args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseError = function (code, args) {
	// FIXME: this.errors.push([this.tokenizer.position, code, data]);
	if (!this.errorHandler)
		return;
	var message = formatMessage(messages[code], args);
	this.errorHandler.error(message, this.tokenizer._inputStream.location(), code);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	this._inputStream = new InputStream();
	this._currentToken = null;
	this._temporaryBuffer = '';
	this._additionalAllowedCharacter = '';
}

Tokenizer.prototype._parseError = function(code, args) {
	this._tokenHandler.<span class="apidocCodeKeywordSpan">parseError</span>(code, args);
};

Tokenizer.prototype._emitToken = function(token) {
	if (token.type === 'StartTag') {
		for (var i = 1; i &lt; token.data.length; i++) {
			if (!token.data[i].nodeName)
				token.data.splice(i--, 1);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.popElement" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.popElement">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>popElement
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">popElement = function () {
	return this.openElements.pop();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		"-default": 'endTagOther'
	};

	modes.inHead.processEOF = function() {
		var name = tree.currentStackItem().localName;
		if (['title', 'style', 'script'].indexOf(name) != -1) {
			tree.parseError("expected-named-closing-tag-but-got-eof", {name: name});
			tree.<span class="apidocCodeKeywordSpan">popElement</span>();
		}

		this.anythingElse();

		tree.insertionMode.processEOF();
	};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.processGenericRCDATAStartTag" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.processGenericRCDATAStartTag">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>processGenericRCDATAStartTag
        <span class="apidocSignatureSpan">(name, attributes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">processGenericRCDATAStartTag = function (name, attributes) {
	this.insertElement(name, attributes);
	this.tokenizer.setState(Tokenizer.RCDATA);
	this.originalInsertionMode = this.insertionModeName;
	this.setInsertionMode('text');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	};

	modes.inHead.startTagHead = function(name, attributes) {
		tree.parseError('two-heads-are-not-better-than-one');
	};

	modes.inHead.startTagTitle = function(name, attributes) {
		tree.<span class="apidocCodeKeywordSpan">processGenericRCDATAStartTag</span>(name, attributes);
	};

	modes.inHead.startTagNoScript = function(name, attributes) {
		if (tree.scriptingEnabled)
			return tree.processGenericRawTextStartTag(name, attributes);
		tree.insertElement(name, attributes);
		tree.setInsertionMode('inHeadNoscript');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.processGenericRawTextStartTag" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.processGenericRawTextStartTag">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>processGenericRawTextStartTag
        <span class="apidocSignatureSpan">(name, attributes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">processGenericRawTextStartTag = function (name, attributes) {
	this.insertElement(name, attributes);
	this.tokenizer.setState(Tokenizer.RAWTEXT);
	this.originalInsertionMode = this.insertionModeName;
	this.setInsertionMode('text');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	modes.inHead.startTagTitle = function(name, attributes) {
		tree.processGenericRCDATAStartTag(name, attributes);
	};

	modes.inHead.startTagNoScript = function(name, attributes) {
		if (tree.scriptingEnabled)
			return tree.<span class="apidocCodeKeywordSpan">processGenericRawTextStartTag</span>(name, attributes);
		tree.insertElement(name, attributes);
		tree.setInsertionMode('inHeadNoscript');
	};

	modes.inHead.startTagNoFramesStyle = function(name, attributes) {
		// XXX Need to decide whether to implement the scripting disabled case
		tree.processGenericRawTextStartTag(name, attributes);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.processToken" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.processToken">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>processToken
        <span class="apidocSignatureSpan">(token)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">processToken = function (token) {
	this.selfClosingFlagAcknowledged = false;

	var currentNode = this.openElements.top || null;
	var insertionMode;
	if (!currentNode || !currentNode.isForeign() ||
		(currentNode.isMathMLTextIntegrationPoint() &amp;&amp;
			((token.type == 'StartTag' &amp;&amp;
					!(token.name in {mglyph:0, malignmark:0})) ||
				(token.type === 'Characters'))
		) ||
		(currentNode.namespaceURI == "http://www.w3.org/1998/Math/MathML" &amp;&amp;
			currentNode.localName == 'annotation-xml' &amp;&amp;
			token.type == 'StartTag' &amp;&amp; token.name == 'svg'
		) ||
		(currentNode.isHtmlIntegrationPoint() &amp;&amp;
			token.type in {StartTag:0, Characters:0}
		) ||
		token.type == 'EOF'
	) {
		insertionMode = this.insertionMode;
	} else {
		insertionMode = this.insertionModes.inForeignContent;
	}
	switch(token.type) {
	case 'Characters':
		var buffer = new CharacterBuffer(token.data);
		insertionMode.processCharacters(buffer);
		break;
	case 'Comment':
		insertionMode.processComment(token.data);
		break;
	case 'StartTag':
		insertionMode.processStartTag(token.name, token.data, token.selfClosing);
		break;
	case 'EndTag':
		insertionMode.processEndTag(token.name);
		break;
	case 'Doctype':
		insertionMode.processDoctype(token.name, token.publicId, token.systemId, token.forceQuirks);
		break;
	case 'EOF':
		insertionMode.processEOF();
		break;
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		if (token.selfClosing) {
			this._parseError('self-closing-flag-on-end-tag');
		}
		if (token.data.length !== 0) {
			this._parseError('attributes-in-end-tag');
		}
	}
	this._tokenHandler.<span class="apidocCodeKeywordSpan">processToken</span>(token);
	if (token.type === 'StartTag' &amp;&amp; token.selfClosing &amp;&amp; !this._tokenHandler.isSelfClosingFlagAcknowledged
()) {
		this._parseError('non-void-element-with-trailing-solidus', {name: token.name});
	}
};

Tokenizer.prototype._emitCurrentToken = function() {
	this._state = Tokenizer.DATA;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.reconstructActiveFormattingElements" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.reconstructActiveFormattingElements">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>reconstructActiveFormattingElements
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reconstructActiveFormattingElements = function () {
	// Within this algorithm the order of steps decribed in the specification
	// is not quite the same as the order of steps in the code. It should still
	// do the same though.

	// Step 1: stop if there's nothing to do
	if (this.activeFormattingElements.length === 0)
		return;

	// Step 2 and 3: start with the last element
	var i = this.activeFormattingElements.length - 1;
	var entry = this.activeFormattingElements[i];
	if (entry == Marker || this.openElements.contains(entry))
		return;

	while (entry != Marker &amp;&amp; !this.openElements.contains(entry)) {
		i -= 1;
		entry = this.activeFormattingElements[i];
		if (!entry)
			break;
	}

	while (true) {
		i += 1;
		entry = this.activeFormattingElements[i];
		this.insertElement(entry.localName, entry.attributes);
		var element = this.currentStackItem();
		this.activeFormattingElements[i] = element;
		if (element == this.activeFormattingElements[this.activeFormattingElements.length -1])
			break;
	}

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	};

	modes.inBody.processCharacters = function(buffer) {
		if (tree.shouldSkipLeadingNewline) {
			tree.shouldSkipLeadingNewline = false;
			buffer.skipAtMostOneLeadingNewline();
		}
		tree.<span class="apidocCodeKeywordSpan">reconstructActiveFormattingElements</span>();
		var characters = buffer.takeRemaining();
		characters = characters.replace(/\u0000/g, function(match, index){
			// @todo position
			tree.parseError("invalid-codepoint");
			return '';
		});
		if (!characters)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.removeElementFromActiveFormattingElements" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.removeElementFromActiveFormattingElements">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>removeElementFromActiveFormattingElements
        <span class="apidocSignatureSpan">(item)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">removeElementFromActiveFormattingElements = function (item) {
	var index = this.activeFormattingElements.indexOf(item);
	if (index &gt;= 0)
		this.activeFormattingElements.splice(index, 1);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	modes.inBody.startTagA = function(name, attributes) {
		var activeA = tree.elementInActiveFormattingElements('a');
		if (activeA) {
			tree.parseError("unexpected-start-tag-implies-end-tag", {startName: "a", endName: "a"});
			tree.adoptionAgencyEndTag('a');
			if (tree.openElements.contains(activeA))
				tree.openElements.remove(activeA);
			tree.<span class="apidocCodeKeywordSpan">removeElementFromActiveFormattingElements</span>(activeA);
		}
		tree.reconstructActiveFormattingElements();
		tree.insertFormattingElement(name, attributes);
	};

	modes.inBody.startTagFormatting = function(name, attributes) {
		tree.reconstructActiveFormattingElements();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.reparentChildren" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.reparentChildren">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>reparentChildren
        <span class="apidocSignatureSpan">(oldParent, newParent)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reparentChildren = function (oldParent, newParent) {
	throw new Error("Not implemented");
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		} else {
			this.attachNode(lastNode.node, commonAncestor.node);
		}

		var clone = this.createElement("http://www.w3.org/1999/xhtml", formattingElement.localName, formattingElement.attributes
);
		var formattingClone = new StackItem(formattingElement.namespaceURI, formattingElement.localName, formattingElement.attributes,
clone);

		this.<span class="apidocCodeKeywordSpan">reparentChildren</span>(furthestBlock.node, clone);
		this.attachNode(clone, furthestBlock.node);

		this.removeElementFromActiveFormattingElements(formattingElement);
		this.activeFormattingElements.splice(Math.min(bookmark, this.activeFormattingElements.length), 0, formattingClone);

		this.openElements.remove(formattingElement);
		this.openElements.elements.splice(this.openElements.elements.indexOf(furthestBlock) + 1, 0, formattingClone);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.resetInsertionMode" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.resetInsertionMode">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>resetInsertionMode
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resetInsertionMode = function () {
	var last = false;
	var node = null;
	for (var i = this.openElements.length - 1; i &gt;= 0; i--) {
		node = this.openElements.item(i);
		if (i === 0) {
			assert.ok(this.context);
			last = true;
			node = new StackItem("http://www.w3.org/1999/xhtml", this.context, [], null);
		}

		if (node.namespaceURI === "http://www.w3.org/1999/xhtml") {
			// TODO template tag
			if (node.localName === 'select')
				// FIXME handle inSelectInTable
				return this.setInsertionMode('inSelect');
			if (node.localName === 'td' || node.localName === 'th')
				return this.setInsertionMode('inCell');
			if (node.localName === 'tr')
				return this.setInsertionMode('inRow');
			if (node.localName === 'tbody' || node.localName === 'thead' || node.localName === 'tfoot')
				return this.setInsertionMode('inTableBody');
			if (node.localName === 'caption')
				return this.setInsertionMode('inCaption');
			if (node.localName === 'colgroup')
				return this.setInsertionMode('inColumnGroup');
			if (node.localName === 'table')
				return this.setInsertionMode('inTable');
			if (node.localName === 'head' &amp;&amp; !last)
				return this.setInsertionMode('inHead');
			if (node.localName === 'body')
				return this.setInsertionMode('inBody');
			if (node.localName === 'frameset')
				return this.setInsertionMode('inFrameset');
			if (node.localName === 'html')
				if (!this.openElements.headElement)
					return this.setInsertionMode('beforeHead');
				else
					return this.setInsertionMode('afterHead');
		}

		if (last)
			return this.setInsertionMode('inBody');
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		if (tree.openElements.inTableScope(name)) {
			tree.generateImpliedEndTags();
			if (tree.currentStackItem().localName != name) {
				tree.parseError("end-tag-too-early-named", {gotName: 'table', expectedName: tree.currentStackItem().localName
});
			}

			tree.openElements.popUntilPopped('table');
			tree.<span class="apidocCodeKeywordSpan">resetInsertionMode</span>();
		} else {
			assert.ok(tree.context);
			tree.parseError('unexpected-end-tag', {name: name});
		}
	};

	modes.inTable.endTagIgnore = function(name) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.setFragmentContext" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.setFragmentContext">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>setFragmentContext
        <span class="apidocSignatureSpan">(context)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setFragmentContext = function (context) {
	// Steps 4.2-4.6 of the HTML5 Fragment Case parsing algorithm:
	// http://www.whatwg.org/specs/web-apps/current-work/multipage/the-end.html#fragment-case
	// For efficiency, we skip step 4.2 ("Let root be a new html element with no attributes")
	// and instead use the DocumentFragment as a root node.
	//m_tree.openElements()-&gt;pushRootNode(HTMLStackItem::create(fragment, HTMLStackItem::ItemForDocumentFragmentNode));
	this.context = context;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 */
DOMParser.prototype.parse = function(source) {
	this._tokenizer.tokenize(source);
	return this._treeBuilder.document;
};

DOMParser.prototype.parseFragment = function(source, context) {
	this._treeBuilder.<span class="apidocCodeKeywordSpan">setFragmentContext</span>(context);
	this._tokenizer.tokenize(source);
	return this._treeBuilder.getFragment();
};

Object.defineProperty(DOMParser.prototype, 'scriptingEnabled', {
	get: function() {
		return this._scriptingEnabled;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.setInsertionMode" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.setInsertionMode">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>setInsertionMode
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setInsertionMode = function (name) {
	this.insertionMode = this.insertionModes[name];
	this.insertionModeName = name;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			) {
				// warning
				//tree.warn("obsolete-doctype");
			} else if (!((systemId == null || systemId == "about:legacy-compat") &amp;&amp; publicId == null)) {
				tree.parseError("unknown-doctype");
			}
		}
		tree.<span class="apidocCodeKeywordSpan">setInsertionMode</span>('beforeHTML');
		function publicIdStartsWith(string) {
			return publicId.toLowerCase().indexOf(string) === 0;
		}
	};

	modes.initial.processCharacters = function(buffer) {
		buffer.skipLeadingWhitespace();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.shouldFosterParent" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.shouldFosterParent">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>shouldFosterParent
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">shouldFosterParent = function () {
	return this.redirectAttachToFosterParent &amp;&amp; this.currentStackItem().isFosterParenting();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	this.attachNodeToFosterParent(node, tableElement, this.openElements.item(tableIndex - 1).node);
};

TreeBuilder.prototype.insertElement = function(name, attributes, namespaceURI, selfClosing) {
	if (!namespaceURI)
		namespaceURI = "http://www.w3.org/1999/xhtml";
	var element = this.createElement(namespaceURI, name, attributes);
	if (this.<span class="apidocCodeKeywordSpan">shouldFosterParent</span>())
		this.insertIntoFosterParent(element);
	else
		this.attachNode(element, this.openElements.top.node);
	if (!selfClosing)
		this.openElements.push(new StackItem(namespaceURI, name, attributes, element));
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.start" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.start">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>start
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">start = function () {
	throw "Not mplemented";
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
TreeBuilder.prototype.startTokenization = function(tokenizer) {
	this.tokenizer = tokenizer;
	this.compatMode = "no quirks";
	this.originalInsertionMode = "initial";
	this.framesetOk = true;
	this.openElements = new ElementStack();
	this.activeFormattingElements = [];
	this.<span class="apidocCodeKeywordSpan">start</span>();
	if (this.context) {
		switch(this.context) {
		case 'title':
		case 'textarea':
			this.tokenizer.setState(Tokenizer.RCDATA);
			break;
		case 'style':
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.DOMTreeBuilder.super_.prototype.startTokenization" id="apidoc.element.html5.DOMTreeBuilder.super_.prototype.startTokenization">
        function <span class="apidocSignatureSpan">html5.DOMTreeBuilder.super_.prototype.</span>startTokenization
        <span class="apidocSignatureSpan">(tokenizer)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">startTokenization = function (tokenizer) {
	this.tokenizer = tokenizer;
	this.compatMode = "no quirks";
	this.originalInsertionMode = "initial";
	this.framesetOk = true;
	this.openElements = new ElementStack();
	this.activeFormattingElements = [];
	this.start();
	if (this.context) {
		switch(this.context) {
		case 'title':
		case 'textarea':
			this.tokenizer.setState(Tokenizer.RCDATA);
			break;
		case 'style':
		case 'xmp':
		case 'iframe':
		case 'noembed':
		case 'noframes':
			this.tokenizer.setState(Tokenizer.RAWTEXT);
			break;
		case 'script':
			this.tokenizer.setState(Tokenizer.SCRIPT_DATA);
			break;
		case 'noscript':
			if (this.scriptingEnabled)
				this.tokenizer.setState(Tokenizer.RAWTEXT);
			break;
		case 'plaintext':
			this.tokenizer.setState(Tokenizer.PLAINTEXT);
			break;
		}
		this.insertHtmlElement();
		this.resetInsertionMode();
		// todo form pointer
	} else {
		this.setInsertionMode('initial');
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	Tokenizer.PLAINTEXT = plaintext_state;


	this._state = Tokenizer.DATA;

	this._inputStream.append(source);

	this._tokenHandler.<span class="apidocCodeKeywordSpan">startTokenization</span>(this);

	this._inputStream.eof = true;

	var tokenizer = this;

	while (this._state.call(this, this._inputStream));
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.html5.ElementStack" id="apidoc.module.html5.ElementStack">module html5.ElementStack</a></h1>


    <h2>
        <a href="#apidoc.element.html5.ElementStack.ElementStack" id="apidoc.element.html5.ElementStack.ElementStack">
        function <span class="apidocSignatureSpan">html5.</span>ElementStack
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ElementStack() {
	this.elements = [];
	this.rootNode = null;
	this.headElement = null;
	this.bodyElement = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.html5.InputStream" id="apidoc.module.html5.InputStream">module html5.InputStream</a></h1>


    <h2>
        <a href="#apidoc.element.html5.InputStream.InputStream" id="apidoc.element.html5.InputStream.InputStream">
        function <span class="apidocSignatureSpan">html5.</span>InputStream
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function InputStream() {
	this.data = '';
	this.start = 0;
	this.committed = 0;
	this.eof = false;
	this.lastLocation = {line: 0, column: 0};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.html5.JSDOMParser" id="apidoc.module.html5.JSDOMParser">module html5.JSDOMParser</a></h1>


    <h2>
        <a href="#apidoc.element.html5.JSDOMParser.JSDOMParser" id="apidoc.element.html5.JSDOMParser.JSDOMParser">
        function <span class="apidocSignatureSpan">html5.</span>JSDOMParser
        <span class="apidocSignatureSpan">(document, core)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function JSDOMParser(document, core) {
	this._treeBuilder = new JSDOMTreeBuilder(document, core);
	this._tokenizer = new Tokenizer(this._treeBuilder);
	this._scriptingEnabled = true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```javascript
var HTML5 = require('html5');
var jsdom = require('jsdom');
var core = jsdom.browserAugmentation(jsdom.level(3));

var impl = new core.DOMImplementation();
var document = impl.createDocument();
var parser = new HTML5.<span class="apidocCodeKeywordSpan">JSDOMParser</span>(document, core);

parser.parse('&lt;p&gt;I am a very small HTML document&lt;/p&gt;');

console.log(document.getElementsByTagName("p")[0].innerHTML);
```
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.html5.JSDOMParser.prototype" id="apidoc.module.html5.JSDOMParser.prototype">module html5.JSDOMParser.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.html5.JSDOMParser.prototype.parse" id="apidoc.element.html5.JSDOMParser.prototype.parse">
        function <span class="apidocSignatureSpan">html5.JSDOMParser.prototype.</span>parse
        <span class="apidocSignatureSpan">(source)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parse = function (source) {
	this._tokenizer.tokenize(source);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var jsdom = require('jsdom');
var core = jsdom.browserAugmentation(jsdom.level(3));

var impl = new core.DOMImplementation();
var document = impl.createDocument();
var parser = new HTML5.JSDOMParser(document, core);

parser.<span class="apidocCodeKeywordSpan">parse</span>('&lt;p&gt;I am a very small HTML document&lt;/p&gt;');

console.log(document.getElementsByTagName("p")[0].innerHTML);
```


Interesting features
--------------------
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.JSDOMParser.prototype.parseFragment" id="apidoc.element.html5.JSDOMParser.prototype.parseFragment">
        function <span class="apidocSignatureSpan">html5.JSDOMParser.prototype.</span>parseFragment
        <span class="apidocSignatureSpan">(source, fragment, contextElement)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseFragment = function (source, fragment, contextElement) {
	this._treeBuilder.setFragmentContext(contextElement.nodeName.toLowerCase());
	this._tokenizer.tokenize(source);
	this._treeBuilder.reparentChildren(this._treeBuilder.openElements.rootNode, fragment);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.html5.JSDOMTreeBuilder" id="apidoc.module.html5.JSDOMTreeBuilder">module html5.JSDOMTreeBuilder</a></h1>


    <h2>
        <a href="#apidoc.element.html5.JSDOMTreeBuilder.JSDOMTreeBuilder" id="apidoc.element.html5.JSDOMTreeBuilder.JSDOMTreeBuilder">
        function <span class="apidocSignatureSpan">html5.</span>JSDOMTreeBuilder
        <span class="apidocSignatureSpan">(document, core)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function JSDOMTreeBuilder(document, core) {
	TreeBuilder.call(this);
	this.scriptingEnabled = true;
	this.document = document;
	this.core = core;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.JSDOMTreeBuilder.super_" id="apidoc.element.html5.JSDOMTreeBuilder.super_">
        function <span class="apidocSignatureSpan">html5.JSDOMTreeBuilder.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function TreeBuilder() {
	this.tokenizer = null;
	this.errorHandler = null;
	this.scriptingEnabled = false;
	this.document = null;
	this.head = null;
	this.form = null;
	this.openElements = new ElementStack();
	this.activeFormattingElements = [];
	this.insertionMode = null;
	this.insertionModeName = "";
	this.originalInsertionMode = "";
	this.inQuirksMode = false; // TODO quirks mode
	this.compatMode = "no quirks";
	this.framesetOk = true;
	this.redirectAttachToFosterParent = false;
	this.selfClosingFlagAcknowledged = false;
	this.context = "";
	this.pendingTableCharacters = [];
	this.shouldSkipLeadingNewline = false;

	var tree = this;
	var modes = this.insertionModes = {};
	modes.base = {
		end_tag_handlers: {"-default": 'endTagOther'},
		start_tag_handlers: {"-default": 'startTagOther'},
		processEOF: function() {
			tree.generateImpliedEndTags();
			if (tree.openElements.length &gt; 2) {
				tree.parseError('expected-closing-tag-but-got-eof');
			} else if (tree.openElements.length == 2 &amp;&amp;
				tree.openElements.item(1).localName != 'body') {
				// This happens for framesets or something?
				tree.parseError('expected-closing-tag-but-got-eof');
			} else if (tree.context &amp;&amp; tree.openElements.length &gt; 1) {
				// XXX This is not what the specification says. Not sure what to do here.
				//tree.parseError('eof-in-innerhtml');
			}
		},
		processComment: function(data) {
			// For most phases the following is forceQuirks. Where it's not it will be
			// overridden.
			tree.insertComment(data, tree.currentStackItem().node);
		},
		processDoctype: function(name, publicId, systemId, forceQuirks) {
			tree.parseError('unexpected-doctype');
		},
		processStartTag: function(name, attributes, selfClosing) {
			if (this[this.start_tag_handlers[name]]) {
				this[this.start_tag_handlers[name]](name, attributes, selfClosing);
			} else if (this[this.start_tag_handlers["-default"]]) {
				this[this.start_tag_handlers["-default"]](name, attributes, selfClosing);
			} else {
				throw(new Error("No handler found for "+name));
			}
		},
		processEndTag: function(name) {
			if (this[this.end_tag_handlers[name]]) {
				this[this.end_tag_handlers[name]](name);
			} else if (this[this.end_tag_handlers["-default"]]) {
				this[this.end_tag_handlers["-default"]](name);
			} else {
				throw(new Error("No handler found for "+name));
			}
		},
		startTagHtml: function(name, attributes) {
			modes.inBody.startTagHtml(name, attributes);
		}
	};

	modes.initial = Object.create(modes.base);

	modes.initial.processEOF = function() {
		tree.parseError("expected-doctype-but-got-eof");
		this.anythingElse();
		tree.insertionMode.processEOF();
	};

	modes.initial.processComment = function(data) {
		tree.insertComment(data, tree.document);
	};

	modes.initial.processDoctype = function(name, publicId, systemId, forceQuirks) {
		tree.insertDoctype(name || '', publicId || '', systemId || '');

		if (forceQuirks || name != 'html' || (publicId != null &amp;&amp; ([
					"+//silmaril//dtd html pro v0r11 19970101//",
					"-//advasoft ltd//dtd html 3.0 aswedit + extensions//",
					"-//as//dtd html 3.0 aswedit + extensions//",
					"-//ietf//dtd html 2.0 level 1//",
					"-//ietf//dtd html 2.0 level 2//",
					"-//ietf//dtd html 2.0 strict level 1//",
					"-//ietf//dtd html 2.0 strict level 2//",
					"-//ietf//dtd html 2.0 strict//",
					"-//ietf//dtd html 2.0//",
					"-//ietf//dtd html 2.1e//",
					"-//ietf//dtd html 3.0//",
					"-//ietf//dtd html 3.0//",
					"-//ietf//dtd html 3.2 final//",
					"-//ietf//dtd html 3.2//",
					"-//ietf//dtd html 3//",
					"-//ietf//dtd html level 0//",
					"-//ietf//dtd html level 0//",
					"-//ietf//dtd html level 1//",
					"-//ietf//dtd html level 1//",
					"-//ietf//dtd html level 2//",
					"-//ietf//dtd html level 2//",
					"-//ietf//dtd html level 3//",
					"-//ietf//dtd html level 3//",
					"-//ietf//dtd html strict level 0//",
					"-//ietf//dtd html strict level 0//",
					"-//ietf//dtd html strict le ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.html5.JSDOMTreeBuilder.prototype" id="apidoc.module.html5.JSDOMTreeBuilder.prototype">module html5.JSDOMTreeBuilder.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.html5.JSDOMTreeBuilder.prototype.addAttributesToElement" id="apidoc.element.html5.JSDOMTreeBuilder.prototype.addAttributesToElement">
        function <span class="apidocSignatureSpan">html5.JSDOMTreeBuilder.prototype.</span>addAttributesToElement
        <span class="apidocSignatureSpan">(element, attributes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addAttributesToElement = function (element, attributes) {
	for (var i = 0; i &lt; attributes.length; i++) {
		if (!element._attributes.getNamedItem(attributes[i].nodeName)) {
			var attr = new this.core.Attr(this.document, attributes[i].nodeName, false);
			attr.namespaceURI = attributes[i].namespaceURI || null;
			attr._nodeName = (attributes[i].prefix ? attributes[i].prefix + ':' : '') + attributes[i].nodeName;
			attr._localName = attributes[i].nodeName;
			attr._prefix = attributes[i].prefix || null;
			attr.value = attributes[i].nodeValue;
			element._attributes.setNamedItemNS(attr);
		}
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		tree.insertText(characters);
		if (tree.framesetOk &amp;&amp; !isAllWhitespaceOrReplacementCharacters(characters))
			tree.framesetOk = false;
	};

	modes.inBody.startTagHtml = function(name, attributes) {
		tree.parseError('non-html-root');
		tree.<span class="apidocCodeKeywordSpan">addAttributesToElement</span>(tree.openElements.rootNode, attributes);
	};

	modes.inBody.startTagProcessInHead = function(name, attributes) {
		modes.inHead.processStartTag(name, attributes);
	};

	modes.inBody.startTagBody = function(name, attributes) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.JSDOMTreeBuilder.prototype.appendCharacters" id="apidoc.element.html5.JSDOMTreeBuilder.prototype.appendCharacters">
        function <span class="apidocSignatureSpan">html5.JSDOMTreeBuilder.prototype.</span>appendCharacters
        <span class="apidocSignatureSpan">(parent, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">appendCharacters = function (parent, data) {
	var lastChild = parent.lastChild;
	if (lastChild &amp;&amp; lastChild.nodeType == lastChild.TEXT_NODE) {
		// todo parserAppendData
		lastChild.appendData(data);
		return;
	}
	var textNode = new this.core.Text(this.document, data);
	this.attachNode(textNode, parent);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

DOMTreeBuilder.prototype.insertText = function(data) {
	if (this.redirectAttachToFosterParent &amp;&amp; this.openElements.top.isFosterParenting()) {
		var tableIndex = this.openElements.findIndex('table');
		var tableItem = this.openElements.item(tableIndex);
		var table = tableItem.node;
		if (tableIndex === 0) {
			return this.<span class="apidocCodeKeywordSpan">appendCharacters</span>(table, data);
		}
		var parent = table.parentNode;
		if (parent) {
			var previousSibling = table.previousSibling;
			if (previousSibling &amp;&amp; previousSibling.nodeType === previousSibling.TEXT_NODE) {
				previousSibling.appendData(data);
				return;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.JSDOMTreeBuilder.prototype.attachNode" id="apidoc.element.html5.JSDOMTreeBuilder.prototype.attachNode">
        function <span class="apidocSignatureSpan">html5.JSDOMTreeBuilder.prototype.</span>attachNode
        <span class="apidocSignatureSpan">(child, parent)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">attachNode = function (child, parent) {
	// TODO parserAppendChild
	parent.appendChild(child);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			var newNode = new StackItem(node.namespaceURI, node.localName, node.attributes, clone);

			this.activeFormattingElements[this.activeFormattingElements.indexOf(node)] = newNode;
			this.openElements.elements[this.openElements.elements.indexOf(node)] = newNode;

			node = newNode;
			this.detachFromParent(lastNode.node);
			this.<span class="apidocCodeKeywordSpan">attachNode</span>(lastNode.node, node.node);
			lastNode = node;
		}

		this.detachFromParent(lastNode.node);
		if (commonAncestor.isFosterParenting()) {
			this.insertIntoFosterParent(lastNode.node);
		} else {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.JSDOMTreeBuilder.prototype.attachNodeToFosterParent" id="apidoc.element.html5.JSDOMTreeBuilder.prototype.attachNodeToFosterParent">
        function <span class="apidocSignatureSpan">html5.JSDOMTreeBuilder.prototype.</span>attachNodeToFosterParent
        <span class="apidocSignatureSpan">(child, table, stackParent)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">attachNodeToFosterParent = function (child, table, stackParent) {
	var parent = table.parentNode;
	if (parent)
		// TODO parserInsertBefore
		parent.insertBefore(child, table);
	else
		this.attachNode(child, stackParent);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

TreeBuilder.prototype.insertIntoFosterParent = function(node) {
	var tableIndex = this.openElements.findIndex('table');
	var tableElement = this.openElements.item(tableIndex).node;
	if (tableIndex === 0)
		return this.attachNode(node, tableElement);
	this.<span class="apidocCodeKeywordSpan">attachNodeToFosterParent</span>(node, tableElement, this.openElements.item(tableIndex -
1).node);
};

TreeBuilder.prototype.insertElement = function(name, attributes, namespaceURI, selfClosing) {
	if (!namespaceURI)
		namespaceURI = "http://www.w3.org/1999/xhtml";
	var element = this.createElement(namespaceURI, name, attributes);
	if (this.shouldFosterParent())
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.JSDOMTreeBuilder.prototype.createElement" id="apidoc.element.html5.JSDOMTreeBuilder.prototype.createElement">
        function <span class="apidocSignatureSpan">html5.JSDOMTreeBuilder.prototype.</span>createElement
        <span class="apidocSignatureSpan">(namespaceURI, localName, attributes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createElement = function (namespaceURI, localName, attributes) {
	var element;
	if (namespaceURI === "http://www.w3.org/1999/xhtml") {
		element = (this.document._elementBuilders[localName] || this.document._defaultElementBuilder)(this.document, localName);
	} else {
		element = new this.core.Element(this.document, localName);
	}

	element._created = false;
	element._namespaceURI = namespaceURI;
	element._nodeName = localName;
	element._localName = localName;
	element._created = true;

	if (attributes) {
		for (var i = 0; i &lt; attributes.length; i++) {
			var attr = new this.core.Attr(this.document, attributes[i].nodeName, false);
			attr.namespaceURI = attributes[i].namespaceURI || null;
			attr._nodeName = (attributes[i].prefix ? attributes[i].prefix + ':' : '') + attributes[i].nodeName;
			attr._localName = attributes[i].nodeName;
			attr._prefix = attributes[i].prefix || null;
			attr.value = attributes[i].nodeValue;
			element._attributes.setNamedItemNS(attr);
		}
	}
	return element;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			}
			if (node == formattingElement)
				break;

			if (lastNode == furthestBlock)
				bookmark = this.activeFormattingElements.indexOf(node) + 1;

			var clone = this.<span class="apidocCodeKeywordSpan">createElement</span>(node.namespaceURI, node.localName, node.attributes);
			var newNode = new StackItem(node.namespaceURI, node.localName, node.attributes, clone);

			this.activeFormattingElements[this.activeFormattingElements.indexOf(node)] = newNode;
			this.openElements.elements[this.openElements.elements.indexOf(node)] = newNode;

			node = newNode;
			this.detachFromParent(lastNode.node);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.JSDOMTreeBuilder.prototype.detachFromParent" id="apidoc.element.html5.JSDOMTreeBuilder.prototype.detachFromParent">
        function <span class="apidocSignatureSpan">html5.JSDOMTreeBuilder.prototype.</span>detachFromParent
        <span class="apidocSignatureSpan">(node)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">detachFromParent = function (node) {
	var parent = node.parentNode;
	if (parent)
		parent.removeChild(node);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	modes.inBody.startTagFrameset = function(name, attributes) {
		tree.parseError('unexpected-start-tag', {name: 'frameset'});
		if (tree.openElements.length == 1 ||
			tree.openElements.item(1).localName != 'body') {
			assert.ok(tree.context);
		} else if (tree.framesetOk) {
			tree.<span class="apidocCodeKeywordSpan">detachFromParent</span>(tree.openElements.bodyElement);
			while (tree.openElements.length &gt; 1)
				tree.openElements.pop();
			tree.insertElement(name, attributes);
			tree.setInsertionMode('inFrameset');
		}
	};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.JSDOMTreeBuilder.prototype.insertComment" id="apidoc.element.html5.JSDOMTreeBuilder.prototype.insertComment">
        function <span class="apidocSignatureSpan">html5.JSDOMTreeBuilder.prototype.</span>insertComment
        <span class="apidocSignatureSpan">(data, parent)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insertComment = function (data, parent) {
	if (!parent)
		parent = this.currentStackItem().node();
	var comment = new this.core.Comment(this.document, data);
	this.attachNode(comment, parent);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				// XXX This is not what the specification says. Not sure what to do here.
				//tree.parseError('eof-in-innerhtml');
			}
		},
		processComment: function(data) {
			// For most phases the following is forceQuirks. Where it's not it will be
			// overridden.
			tree.<span class="apidocCodeKeywordSpan">insertComment</span>(data, tree.currentStackItem().node);
		},
		processDoctype: function(name, publicId, systemId, forceQuirks) {
			tree.parseError('unexpected-doctype');
		},
		processStartTag: function(name, attributes, selfClosing) {
			if (this[this.start_tag_handlers[name]]) {
				this[this.start_tag_handlers[name]](name, attributes, selfClosing);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.JSDOMTreeBuilder.prototype.insertDoctype" id="apidoc.element.html5.JSDOMTreeBuilder.prototype.insertDoctype">
        function <span class="apidocSignatureSpan">html5.JSDOMTreeBuilder.prototype.</span>insertDoctype
        <span class="apidocSignatureSpan">(name, publicId, systemId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insertDoctype = function (name, publicId, systemId) {
	var doctype = new this.core.DocumentType(null, name);
	doctype._publicId = publicId;
	doctype._systemId = systemId;
	this.attachNode(doctype, this.document);
	// TODO compatibility mode
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	};

	modes.initial.processComment = function(data) {
		tree.insertComment(data, tree.document);
	};

	modes.initial.processDoctype = function(name, publicId, systemId, forceQuirks) {
		tree.<span class="apidocCodeKeywordSpan">insertDoctype</span>(name || '', publicId || '', systemId || '
;');

		if (forceQuirks || name != 'html' || (publicId != null &amp;&amp; ([
					"+//silmaril//dtd html pro v0r11 19970101//",
					"-//advasoft ltd//dtd html 3.0 aswedit + extensions//",
					"-//as//dtd html 3.0 aswedit + extensions//",
					"-//ietf//dtd html 2.0 level 1//",
					"-//ietf//dtd html 2.0 level 2//",
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.JSDOMTreeBuilder.prototype.insertText" id="apidoc.element.html5.JSDOMTreeBuilder.prototype.insertText">
        function <span class="apidocSignatureSpan">html5.JSDOMTreeBuilder.prototype.</span>insertText
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insertText = function (data) {
	if (this.redirectAttachToFosterParent &amp;&amp; this.openElements.top.isFosterParenting()) {
		var tableIndex = this.openElements.findIndex('table');
		var tableItem = this.openElements.item(tableIndex);
		var table = tableItem.node;
		if (tableIndex === 0) {
			return this.appendCharacters(table, data);
		}
		var parent = table.parentNode;
		if (parent) {
			var previousSibling = table.previousSibling;
			if (previousSibling &amp;&amp; previousSibling.nodeType === previousSibling.TEXT_NODE) {
				// todo parserAppendData
				previousSibling.appendData(data);
				return;
			}
			var textNode = new this.core.Text(this.document, data);
			// todo parserInsertBefore
			parent.insertBefore(textNode, table);
			return;
		}
		var stackParent = this.openElements.item(tableIndex - 1).node;
		var lastChild = stackParent.lastChild;
		if (listChild &amp;&amp; lastChild.nodeType == lastChild.TEXT_NODE) {
			// todo parserAppendData
			lastChild.appendData(data);
			return;
		}
		var textNode = new this.core.Text(this.document, data);
		this.attachNode(textNode, stackParent);
		return;
	}
	this.appendCharacters(this.currentStackItem().node, data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		var whitespace = "";
		for (var i = 0; i &lt; characters.length; i++) {
			var ch = characters[i];
			if (isWhitespace(ch))
				whitespace += ch;
		}
		if (whitespace) {
			tree.<span class="apidocCodeKeywordSpan">insertText</span>(whitespace);
		}
		if (whitespace.length &lt; characters.length)
			tree.parseError('expected-eof-but-got-char');
	};

	modes.afterFrameset.startTagNoframes = function(name, attributes) {
		modes.inHead.processStartTag(name, attributes);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.JSDOMTreeBuilder.prototype.reparentChildren" id="apidoc.element.html5.JSDOMTreeBuilder.prototype.reparentChildren">
        function <span class="apidocSignatureSpan">html5.JSDOMTreeBuilder.prototype.</span>reparentChildren
        <span class="apidocSignatureSpan">(oldParent, newParent)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reparentChildren = function (oldParent, newParent) {
	while (oldParent.hasChildNodes()) {
		newParent.appendChild(oldParent.firstChild);
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		} else {
			this.attachNode(lastNode.node, commonAncestor.node);
		}

		var clone = this.createElement("http://www.w3.org/1999/xhtml", formattingElement.localName, formattingElement.attributes
);
		var formattingClone = new StackItem(formattingElement.namespaceURI, formattingElement.localName, formattingElement.attributes,
clone);

		this.<span class="apidocCodeKeywordSpan">reparentChildren</span>(furthestBlock.node, clone);
		this.attachNode(clone, furthestBlock.node);

		this.removeElementFromActiveFormattingElements(formattingElement);
		this.activeFormattingElements.splice(Math.min(bookmark, this.activeFormattingElements.length), 0, formattingClone);

		this.openElements.remove(formattingElement);
		this.openElements.elements.splice(this.openElements.elements.indexOf(furthestBlock) + 1, 0, formattingClone);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.JSDOMTreeBuilder.prototype.start" id="apidoc.element.html5.JSDOMTreeBuilder.prototype.start">
        function <span class="apidocSignatureSpan">html5.JSDOMTreeBuilder.prototype.</span>start
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">start = function () {

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
TreeBuilder.prototype.startTokenization = function(tokenizer) {
	this.tokenizer = tokenizer;
	this.compatMode = "no quirks";
	this.originalInsertionMode = "initial";
	this.framesetOk = true;
	this.openElements = new ElementStack();
	this.activeFormattingElements = [];
	this.<span class="apidocCodeKeywordSpan">start</span>();
	if (this.context) {
		switch(this.context) {
		case 'title':
		case 'textarea':
			this.tokenizer.setState(Tokenizer.RCDATA);
			break;
		case 'style':
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.html5.SAXParser" id="apidoc.module.html5.SAXParser">module html5.SAXParser</a></h1>


    <h2>
        <a href="#apidoc.element.html5.SAXParser.SAXParser" id="apidoc.element.html5.SAXParser.SAXParser">
        function <span class="apidocSignatureSpan">html5.</span>SAXParser
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SAXParser() {
	this.contentHandler = null;
	this.lexicalHandler = null;
	this._errorHandler = null;
	this._treeBuilder = new SAXTreeBuilder();
	this._tokenizer = new Tokenizer(this._treeBuilder);
	this._scriptingEnabled = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.html5.SAXParser.prototype" id="apidoc.module.html5.SAXParser.prototype">module html5.SAXParser.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.html5.SAXParser.prototype.parse" id="apidoc.element.html5.SAXParser.prototype.parse">
        function <span class="apidocSignatureSpan">html5.SAXParser.prototype.</span>parse
        <span class="apidocSignatureSpan">(source)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parse = function (source) {
	this._tokenizer.tokenize(source);
	var document = this._treeBuilder.document;
	if (document) {
		new TreeParser(this.contentHandler, this.lexicalHandler).parse(document);
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var jsdom = require('jsdom');
var core = jsdom.browserAugmentation(jsdom.level(3));

var impl = new core.DOMImplementation();
var document = impl.createDocument();
var parser = new HTML5.JSDOMParser(document, core);

parser.<span class="apidocCodeKeywordSpan">parse</span>('&lt;p&gt;I am a very small HTML document&lt;/p&gt;');

console.log(document.getElementsByTagName("p")[0].innerHTML);
```


Interesting features
--------------------
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.SAXParser.prototype.parseFragment" id="apidoc.element.html5.SAXParser.prototype.parseFragment">
        function <span class="apidocSignatureSpan">html5.SAXParser.prototype.</span>parseFragment
        <span class="apidocSignatureSpan">(source, context)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseFragment = function (source, context) {
	this._treeBuilder.setFragmentContext(context);
	this._tokenizer.tokenize(source);
	var fragment = this._treeBuilder.getFragment();
	if (fragment) {
		new TreeParser(this.contentHandler, this.lexicalHandler).parse(fragment);
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.html5.SAXTreeBuilder" id="apidoc.module.html5.SAXTreeBuilder">module html5.SAXTreeBuilder</a></h1>


    <h2>
        <a href="#apidoc.element.html5.SAXTreeBuilder.SAXTreeBuilder" id="apidoc.element.html5.SAXTreeBuilder.SAXTreeBuilder">
        function <span class="apidocSignatureSpan">html5.</span>SAXTreeBuilder
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SAXTreeBuilder() {
	TreeBuilder.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.SAXTreeBuilder.super_" id="apidoc.element.html5.SAXTreeBuilder.super_">
        function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function TreeBuilder() {
	this.tokenizer = null;
	this.errorHandler = null;
	this.scriptingEnabled = false;
	this.document = null;
	this.head = null;
	this.form = null;
	this.openElements = new ElementStack();
	this.activeFormattingElements = [];
	this.insertionMode = null;
	this.insertionModeName = "";
	this.originalInsertionMode = "";
	this.inQuirksMode = false; // TODO quirks mode
	this.compatMode = "no quirks";
	this.framesetOk = true;
	this.redirectAttachToFosterParent = false;
	this.selfClosingFlagAcknowledged = false;
	this.context = "";
	this.pendingTableCharacters = [];
	this.shouldSkipLeadingNewline = false;

	var tree = this;
	var modes = this.insertionModes = {};
	modes.base = {
		end_tag_handlers: {"-default": 'endTagOther'},
		start_tag_handlers: {"-default": 'startTagOther'},
		processEOF: function() {
			tree.generateImpliedEndTags();
			if (tree.openElements.length &gt; 2) {
				tree.parseError('expected-closing-tag-but-got-eof');
			} else if (tree.openElements.length == 2 &amp;&amp;
				tree.openElements.item(1).localName != 'body') {
				// This happens for framesets or something?
				tree.parseError('expected-closing-tag-but-got-eof');
			} else if (tree.context &amp;&amp; tree.openElements.length &gt; 1) {
				// XXX This is not what the specification says. Not sure what to do here.
				//tree.parseError('eof-in-innerhtml');
			}
		},
		processComment: function(data) {
			// For most phases the following is forceQuirks. Where it's not it will be
			// overridden.
			tree.insertComment(data, tree.currentStackItem().node);
		},
		processDoctype: function(name, publicId, systemId, forceQuirks) {
			tree.parseError('unexpected-doctype');
		},
		processStartTag: function(name, attributes, selfClosing) {
			if (this[this.start_tag_handlers[name]]) {
				this[this.start_tag_handlers[name]](name, attributes, selfClosing);
			} else if (this[this.start_tag_handlers["-default"]]) {
				this[this.start_tag_handlers["-default"]](name, attributes, selfClosing);
			} else {
				throw(new Error("No handler found for "+name));
			}
		},
		processEndTag: function(name) {
			if (this[this.end_tag_handlers[name]]) {
				this[this.end_tag_handlers[name]](name);
			} else if (this[this.end_tag_handlers["-default"]]) {
				this[this.end_tag_handlers["-default"]](name);
			} else {
				throw(new Error("No handler found for "+name));
			}
		},
		startTagHtml: function(name, attributes) {
			modes.inBody.startTagHtml(name, attributes);
		}
	};

	modes.initial = Object.create(modes.base);

	modes.initial.processEOF = function() {
		tree.parseError("expected-doctype-but-got-eof");
		this.anythingElse();
		tree.insertionMode.processEOF();
	};

	modes.initial.processComment = function(data) {
		tree.insertComment(data, tree.document);
	};

	modes.initial.processDoctype = function(name, publicId, systemId, forceQuirks) {
		tree.insertDoctype(name || '', publicId || '', systemId || '');

		if (forceQuirks || name != 'html' || (publicId != null &amp;&amp; ([
					"+//silmaril//dtd html pro v0r11 19970101//",
					"-//advasoft ltd//dtd html 3.0 aswedit + extensions//",
					"-//as//dtd html 3.0 aswedit + extensions//",
					"-//ietf//dtd html 2.0 level 1//",
					"-//ietf//dtd html 2.0 level 2//",
					"-//ietf//dtd html 2.0 strict level 1//",
					"-//ietf//dtd html 2.0 strict level 2//",
					"-//ietf//dtd html 2.0 strict//",
					"-//ietf//dtd html 2.0//",
					"-//ietf//dtd html 2.1e//",
					"-//ietf//dtd html 3.0//",
					"-//ietf//dtd html 3.0//",
					"-//ietf//dtd html 3.2 final//",
					"-//ietf//dtd html 3.2//",
					"-//ietf//dtd html 3//",
					"-//ietf//dtd html level 0//",
					"-//ietf//dtd html level 0//",
					"-//ietf//dtd html level 1//",
					"-//ietf//dtd html level 1//",
					"-//ietf//dtd html level 2//",
					"-//ietf//dtd html level 2//",
					"-//ietf//dtd html level 3//",
					"-//ietf//dtd html level 3//",
					"-//ietf//dtd html strict level 0//",
					"-//ietf//dtd html strict level 0//",
					"-//ietf//dtd html strict le ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.html5.SAXTreeBuilder.prototype" id="apidoc.module.html5.SAXTreeBuilder.prototype">module html5.SAXTreeBuilder.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.html5.SAXTreeBuilder.prototype.addAttributesToElement" id="apidoc.element.html5.SAXTreeBuilder.prototype.addAttributesToElement">
        function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.prototype.</span>addAttributesToElement
        <span class="apidocSignatureSpan">(element, attributes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addAttributesToElement = function (element, attributes) {
	for (var i = 0; i &lt; attributes.length; i++) {
		var attribute = attributes[i];
		if (!getAttribute(element, attribute.nodeName))
			element.attributes.push(attribute);
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		tree.insertText(characters);
		if (tree.framesetOk &amp;&amp; !isAllWhitespaceOrReplacementCharacters(characters))
			tree.framesetOk = false;
	};

	modes.inBody.startTagHtml = function(name, attributes) {
		tree.parseError('non-html-root');
		tree.<span class="apidocCodeKeywordSpan">addAttributesToElement</span>(tree.openElements.rootNode, attributes);
	};

	modes.inBody.startTagProcessInHead = function(name, attributes) {
		modes.inHead.processStartTag(name, attributes);
	};

	modes.inBody.startTagBody = function(name, attributes) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.SAXTreeBuilder.prototype.appendCharacters" id="apidoc.element.html5.SAXTreeBuilder.prototype.appendCharacters">
        function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.prototype.</span>appendCharacters
        <span class="apidocSignatureSpan">(parent, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">appendCharacters = function (parent, data) {
	var text = new Characters(this.tokenizer, data);
	parent.appendChild(text);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

DOMTreeBuilder.prototype.insertText = function(data) {
	if (this.redirectAttachToFosterParent &amp;&amp; this.openElements.top.isFosterParenting()) {
		var tableIndex = this.openElements.findIndex('table');
		var tableItem = this.openElements.item(tableIndex);
		var table = tableItem.node;
		if (tableIndex === 0) {
			return this.<span class="apidocCodeKeywordSpan">appendCharacters</span>(table, data);
		}
		var parent = table.parentNode;
		if (parent) {
			var previousSibling = table.previousSibling;
			if (previousSibling &amp;&amp; previousSibling.nodeType === previousSibling.TEXT_NODE) {
				previousSibling.appendData(data);
				return;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.SAXTreeBuilder.prototype.attachNode" id="apidoc.element.html5.SAXTreeBuilder.prototype.attachNode">
        function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.prototype.</span>attachNode
        <span class="apidocSignatureSpan">(node, parent)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">attachNode = function (node, parent) {
	parent.appendChild(node);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			var newNode = new StackItem(node.namespaceURI, node.localName, node.attributes, clone);

			this.activeFormattingElements[this.activeFormattingElements.indexOf(node)] = newNode;
			this.openElements.elements[this.openElements.elements.indexOf(node)] = newNode;

			node = newNode;
			this.detachFromParent(lastNode.node);
			this.<span class="apidocCodeKeywordSpan">attachNode</span>(lastNode.node, node.node);
			lastNode = node;
		}

		this.detachFromParent(lastNode.node);
		if (commonAncestor.isFosterParenting()) {
			this.insertIntoFosterParent(lastNode.node);
		} else {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.SAXTreeBuilder.prototype.attachNodeToFosterParent" id="apidoc.element.html5.SAXTreeBuilder.prototype.attachNodeToFosterParent">
        function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.prototype.</span>attachNodeToFosterParent
        <span class="apidocSignatureSpan">(child, table, stackParent)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">attachNodeToFosterParent = function (child, table, stackParent) {
	var parent = table.parentNode;
	if (parent)
		parent.insertBetween(child, table.previousSibling, table);
	else
		stackParent.appendChild(child);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

TreeBuilder.prototype.insertIntoFosterParent = function(node) {
	var tableIndex = this.openElements.findIndex('table');
	var tableElement = this.openElements.item(tableIndex).node;
	if (tableIndex === 0)
		return this.attachNode(node, tableElement);
	this.<span class="apidocCodeKeywordSpan">attachNodeToFosterParent</span>(node, tableElement, this.openElements.item(tableIndex -
1).node);
};

TreeBuilder.prototype.insertElement = function(name, attributes, namespaceURI, selfClosing) {
	if (!namespaceURI)
		namespaceURI = "http://www.w3.org/1999/xhtml";
	var element = this.createElement(namespaceURI, name, attributes);
	if (this.shouldFosterParent())
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.SAXTreeBuilder.prototype.createElement" id="apidoc.element.html5.SAXTreeBuilder.prototype.createElement">
        function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.prototype.</span>createElement
        <span class="apidocSignatureSpan">(namespaceURI, localName, attributes)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createElement = function (namespaceURI, localName, attributes) {
	var element = new Element(this.tokenizer, namespaceURI, localName, localName, attributes || []);
	return element;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			}
			if (node == formattingElement)
				break;

			if (lastNode == furthestBlock)
				bookmark = this.activeFormattingElements.indexOf(node) + 1;

			var clone = this.<span class="apidocCodeKeywordSpan">createElement</span>(node.namespaceURI, node.localName, node.attributes);
			var newNode = new StackItem(node.namespaceURI, node.localName, node.attributes, clone);

			this.activeFormattingElements[this.activeFormattingElements.indexOf(node)] = newNode;
			this.openElements.elements[this.openElements.elements.indexOf(node)] = newNode;

			node = newNode;
			this.detachFromParent(lastNode.node);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.SAXTreeBuilder.prototype.detachFromParent" id="apidoc.element.html5.SAXTreeBuilder.prototype.detachFromParent">
        function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.prototype.</span>detachFromParent
        <span class="apidocSignatureSpan">(element)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">detachFromParent = function (element) {
	element.detach();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	modes.inBody.startTagFrameset = function(name, attributes) {
		tree.parseError('unexpected-start-tag', {name: 'frameset'});
		if (tree.openElements.length == 1 ||
			tree.openElements.item(1).localName != 'body') {
			assert.ok(tree.context);
		} else if (tree.framesetOk) {
			tree.<span class="apidocCodeKeywordSpan">detachFromParent</span>(tree.openElements.bodyElement);
			while (tree.openElements.length &gt; 1)
				tree.openElements.pop();
			tree.insertElement(name, attributes);
			tree.setInsertionMode('inFrameset');
		}
	};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.SAXTreeBuilder.prototype.end" id="apidoc.element.html5.SAXTreeBuilder.prototype.end">
        function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.prototype.</span>end
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function () {
	this.document.endLocator = this.tokenizer;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.SAXTreeBuilder.prototype.getFragment" id="apidoc.element.html5.SAXTreeBuilder.prototype.getFragment">
        function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.prototype.</span>getFragment
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getFragment = function () {
	var fragment = new DocumentFragment();
	this.reparentChildren(this.openElements.rootNode, fragment);
	return fragment;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	this._tokenizer.tokenize(source);
	return this._treeBuilder.document;
};

DOMParser.prototype.parseFragment = function(source, context) {
	this._treeBuilder.setFragmentContext(context);
	this._tokenizer.tokenize(source);
	return this._treeBuilder.<span class="apidocCodeKeywordSpan">getFragment</span>();
};

Object.defineProperty(DOMParser.prototype, 'scriptingEnabled', {
	get: function() {
		return this._scriptingEnabled;
	},
	set: function(value) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.SAXTreeBuilder.prototype.insertComment" id="apidoc.element.html5.SAXTreeBuilder.prototype.insertComment">
        function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.prototype.</span>insertComment
        <span class="apidocSignatureSpan">(data, parent)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insertComment = function (data, parent) {
	if (!parent)
		parent = this.currentStackItem();
	var comment = new Comment(this.tokenizer, data);
	parent.appendChild(comment);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				// XXX This is not what the specification says. Not sure what to do here.
				//tree.parseError('eof-in-innerhtml');
			}
		},
		processComment: function(data) {
			// For most phases the following is forceQuirks. Where it's not it will be
			// overridden.
			tree.<span class="apidocCodeKeywordSpan">insertComment</span>(data, tree.currentStackItem().node);
		},
		processDoctype: function(name, publicId, systemId, forceQuirks) {
			tree.parseError('unexpected-doctype');
		},
		processStartTag: function(name, attributes, selfClosing) {
			if (this[this.start_tag_handlers[name]]) {
				this[this.start_tag_handlers[name]](name, attributes, selfClosing);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.SAXTreeBuilder.prototype.insertDoctype" id="apidoc.element.html5.SAXTreeBuilder.prototype.insertDoctype">
        function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.prototype.</span>insertDoctype
        <span class="apidocSignatureSpan">(name, publicId, systemId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insertDoctype = function (name, publicId, systemId) {
	var doctype = new DTD(this.tokenizer, name, publicId, systemId);
	doctype.endLocator = this.tokenizer;
	this.document.appendChild(doctype);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	};

	modes.initial.processComment = function(data) {
		tree.insertComment(data, tree.document);
	};

	modes.initial.processDoctype = function(name, publicId, systemId, forceQuirks) {
		tree.<span class="apidocCodeKeywordSpan">insertDoctype</span>(name || '', publicId || '', systemId || '
;');

		if (forceQuirks || name != 'html' || (publicId != null &amp;&amp; ([
					"+//silmaril//dtd html pro v0r11 19970101//",
					"-//advasoft ltd//dtd html 3.0 aswedit + extensions//",
					"-//as//dtd html 3.0 aswedit + extensions//",
					"-//ietf//dtd html 2.0 level 1//",
					"-//ietf//dtd html 2.0 level 2//",
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.SAXTreeBuilder.prototype.insertText" id="apidoc.element.html5.SAXTreeBuilder.prototype.insertText">
        function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.prototype.</span>insertText
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insertText = function (data) {
	if (this.redirectAttachToFosterParent &amp;&amp; this.openElements.top.isFosterParenting()) {
		var tableIndex = this.openElements.findIndex('table');
		var tableItem = this.openElements.item(tableIndex);
		var table = tableItem.node;
		if (tableIndex === 0) {
			return this.appendCharacters(table, data);
		}
		var text = new Characters(this.tokenizer, data);
		var parent = table.parentNode;
		if (parent) {
			parent.insertBetween(text, table.previousSibling, table);
			return;
		}
		var stackParent = this.openElements.item(tableIndex - 1).node;
		stackParent.appendChild(text);
		return;
	}
	this.appendCharacters(this.currentStackItem().node, data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		var whitespace = "";
		for (var i = 0; i &lt; characters.length; i++) {
			var ch = characters[i];
			if (isWhitespace(ch))
				whitespace += ch;
		}
		if (whitespace) {
			tree.<span class="apidocCodeKeywordSpan">insertText</span>(whitespace);
		}
		if (whitespace.length &lt; characters.length)
			tree.parseError('expected-eof-but-got-char');
	};

	modes.afterFrameset.startTagNoframes = function(name, attributes) {
		modes.inHead.processStartTag(name, attributes);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.SAXTreeBuilder.prototype.reparentChildren" id="apidoc.element.html5.SAXTreeBuilder.prototype.reparentChildren">
        function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.prototype.</span>reparentChildren
        <span class="apidocSignatureSpan">(oldParent, newParent)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reparentChildren = function (oldParent, newParent) {
	newParent.appendChildren(oldParent);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		} else {
			this.attachNode(lastNode.node, commonAncestor.node);
		}

		var clone = this.createElement("http://www.w3.org/1999/xhtml", formattingElement.localName, formattingElement.attributes
);
		var formattingClone = new StackItem(formattingElement.namespaceURI, formattingElement.localName, formattingElement.attributes,
clone);

		this.<span class="apidocCodeKeywordSpan">reparentChildren</span>(furthestBlock.node, clone);
		this.attachNode(clone, furthestBlock.node);

		this.removeElementFromActiveFormattingElements(formattingElement);
		this.activeFormattingElements.splice(Math.min(bookmark, this.activeFormattingElements.length), 0, formattingClone);

		this.openElements.remove(formattingElement);
		this.openElements.elements.splice(this.openElements.elements.indexOf(furthestBlock) + 1, 0, formattingClone);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.SAXTreeBuilder.prototype.start" id="apidoc.element.html5.SAXTreeBuilder.prototype.start">
        function <span class="apidocSignatureSpan">html5.SAXTreeBuilder.prototype.</span>start
        <span class="apidocSignatureSpan">(tokenizer)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">start = function (tokenizer) {
	this.document = new Document(this.tokenizer);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
TreeBuilder.prototype.startTokenization = function(tokenizer) {
	this.tokenizer = tokenizer;
	this.compatMode = "no quirks";
	this.originalInsertionMode = "initial";
	this.framesetOk = true;
	this.openElements = new ElementStack();
	this.activeFormattingElements = [];
	this.<span class="apidocCodeKeywordSpan">start</span>();
	if (this.context) {
		switch(this.context) {
		case 'title':
		case 'textarea':
			this.tokenizer.setState(Tokenizer.RCDATA);
			break;
		case 'style':
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.html5.StackItem" id="apidoc.module.html5.StackItem">module html5.StackItem</a></h1>


    <h2>
        <a href="#apidoc.element.html5.StackItem.StackItem" id="apidoc.element.html5.StackItem.StackItem">
        function <span class="apidocSignatureSpan">html5.</span>StackItem
        <span class="apidocSignatureSpan">(namespaceURI, localName, attributes, node)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function StackItem(namespaceURI, localName, attributes, node) {
	this.localName = localName;
	this.namespaceURI = namespaceURI;
	this.attributes = attributes;
	this.node = node;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.html5.Tokenizer" id="apidoc.module.html5.Tokenizer">module html5.Tokenizer</a></h1>


    <h2>
        <a href="#apidoc.element.html5.Tokenizer.Tokenizer" id="apidoc.element.html5.Tokenizer.Tokenizer">
        function <span class="apidocSignatureSpan">html5.</span>Tokenizer
        <span class="apidocSignatureSpan">(tokenHandler)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Tokenizer(tokenHandler) {
	this._tokenHandler = tokenHandler;
	this._state = Tokenizer.DATA;
	this._inputStream = new InputStream();
	this._currentToken = null;
	this._temporaryBuffer = '';
	this._additionalAllowedCharacter = '';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.html5.Tokenizer.prototype" id="apidoc.module.html5.Tokenizer.prototype">module html5.Tokenizer.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.html5.Tokenizer.prototype._currentAttribute" id="apidoc.element.html5.Tokenizer.prototype._currentAttribute">
        function <span class="apidocSignatureSpan">html5.Tokenizer.prototype.</span>_currentAttribute
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_currentAttribute = function () {
	return this._currentToken.data[this._currentToken.data.length - 1];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			tokenizer._parseError("eof-in-attribute-name");
			buffer.unget(data);
			tokenizer.setState(data_state);
			shouldEmit = true;
		} else if (data === '=') {
			tokenizer.setState(before_attribute_value_state);
		} else if (isAlpha(data)) {
			tokenizer.<span class="apidocCodeKeywordSpan">_currentAttribute</span>().nodeName += data.toLowerCase();
			leavingThisState = false;
		} else if (data === '&gt;') {
			// XXX If we emit here the attributes are converted to a dict
			// without being checked and when the code below runs we error
			// because data is a dict not a list
			shouldEmit = true;
		} else if (isWhitespace(data)) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.Tokenizer.prototype._emitCurrentToken" id="apidoc.element.html5.Tokenizer.prototype._emitCurrentToken">
        function <span class="apidocSignatureSpan">html5.Tokenizer.prototype.</span>_emitCurrentToken
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_emitCurrentToken = function () {
	this._state = Tokenizer.DATA;
	this._emitToken(this._currentToken);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			tokenizer._currentToken = {type: 'EndTag', name: this._temporaryBuffer, data: [], selfClosing: false};
			tokenizer.setState(before_attribute_name_state);
		} else if (data === '/' &amp;&amp; appropriate) {
			tokenizer._currentToken = {type: 'EndTag', name: this._temporaryBuffer, data: [], selfClosing: false};
			tokenizer.setState(self_closing_tag_state);
		} else if (data === '&gt;' &amp;&amp; appropriate) {
			tokenizer._currentToken = {type: 'EndTag', name: this._temporaryBuffer, data: [], selfClosing: false};
			tokenizer.<span class="apidocCodeKeywordSpan">_emitCurrentToken</span>();
			tokenizer.setState(data_state);
		} else if (isAlpha(data)) {
			this._temporaryBuffer += data;
			buffer.commit();
		} else {
			tokenizer._emitToken({type: 'Characters', data: '&lt;/' + this._temporaryBuffer});
			buffer.unget(data);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.Tokenizer.prototype._emitToken" id="apidoc.element.html5.Tokenizer.prototype._emitToken">
        function <span class="apidocSignatureSpan">html5.Tokenizer.prototype.</span>_emitToken
        <span class="apidocSignatureSpan">(token)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_emitToken = function (token) {
	if (token.type === 'StartTag') {
		for (var i = 1; i &lt; token.data.length; i++) {
			if (!token.data[i].nodeName)
				token.data.splice(i--, 1);
		}
	} else if (token.type === 'EndTag') {
		if (token.selfClosing) {
			this._parseError('self-closing-flag-on-end-tag');
		}
		if (token.data.length !== 0) {
			this._parseError('attributes-in-end-tag');
		}
	}
	this._tokenHandler.processToken(token);
	if (token.type === 'StartTag' &amp;&amp; token.selfClosing &amp;&amp; !this._tokenHandler.isSelfClosingFlagAcknowledged()) {
		this._parseError('non-void-element-with-trailing-solidus', {name: token.name});
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	if (token.type === 'StartTag' &amp;&amp; token.selfClosing &amp;&amp; !this._tokenHandler.isSelfClosingFlagAcknowledged
()) {
		this._parseError('non-void-element-with-trailing-solidus', {name: token.name});
	}
};

Tokenizer.prototype._emitCurrentToken = function() {
	this._state = Tokenizer.DATA;
	this.<span class="apidocCodeKeywordSpan">_emitToken</span>(this._currentToken);
};

Tokenizer.prototype._currentAttribute = function() {
	return this._currentToken.data[this._currentToken.data.length - 1];
};

Tokenizer.prototype.setState = function(state) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.Tokenizer.prototype._parseError" id="apidoc.element.html5.Tokenizer.prototype._parseError">
        function <span class="apidocSignatureSpan">html5.Tokenizer.prototype.</span>_parseError
        <span class="apidocSignatureSpan">(code, args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_parseError = function (code, args) {
	this._tokenHandler.parseError(code, args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	if (additionalAllowedCharacter === ch) {
		buffer.unget(consumedCharacters);
		return false;
	}
	if (ch == '#') {
		ch = buffer.shift(1);
		if (ch === InputStream.EOF) {
			tokenizer.<span class="apidocCodeKeywordSpan">_parseError</span>("expected-numeric-entity-but-got-eof");
			buffer.unget(consumedCharacters);
			return false;
		}
		consumedCharacters += ch;
		var radix = 10;
		var isDigit = isDecimalDigit;
		if (ch == 'x' || ch == 'X') {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.Tokenizer.prototype.setState" id="apidoc.element.html5.Tokenizer.prototype.setState">
        function <span class="apidocSignatureSpan">html5.Tokenizer.prototype.</span>setState
        <span class="apidocSignatureSpan">(state)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setState = function (state) {
	this._state = state;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	function data_state(buffer) {
		var data = buffer.char();
		if (data === InputStream.EOF) {
			tokenizer._emitToken({type: 'EOF', data: null});
			return false;
		} else if (data === '&amp;') {
			tokenizer.<span class="apidocCodeKeywordSpan">setState</span>(character_reference_in_data_state);
		} else if (data === '&lt;') {
			tokenizer.setState(tag_open_state);
		} else if (data === '\u0000') {
			tokenizer._emitToken({type: 'Characters', data: data});
			buffer.commit();
		} else {
			var chars = buffer.matchUntil("&amp;|&lt;|\u0000");
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.html5.Tokenizer.prototype.tokenize" id="apidoc.element.html5.Tokenizer.prototype.tokenize">
        function <span class="apidocSignatureSpan">html5.Tokenizer.prototype.</span>tokenize
        <span class="apidocSignatureSpan">(source)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">tokenize = function (source) {
	// FIXME proper tokenizer states
	Tokenizer.DATA = data_state;
	Tokenizer.RCDATA = rcdata_state;
	Tokenizer.RAWTEXT = rawtext_state;
	Tokenizer.SCRIPT_DATA = script_data_state;
	Tokenizer.PLAINTEXT = plaintext_state;


	this._state = Tokenizer.DATA;

	this._inputStream.append(source);

	this._tokenHandler.startTokenization(this);

	this._inputStream.eof = true;

	var tokenizer = this;

	while (this._state.call(this, this._inputStream));


	function data_state(buffer) {
		var data = buffer.char();
		if (data === InputStream.EOF) {
			tokenizer._emitToken({type: 'EOF', data: null});
			return false;
		} else if (data === '&amp;') {
			tokenizer.setState(character_reference_in_data_state);
		} else if (data === '&lt;') {
			tokenizer.setState(tag_open_state);
		} else if (data === '\u0000') {
			tokenizer._emitToken({type: 'Characters', data: data});
			buffer.commit();
		} else {
			var chars = buffer.matchUntil("&amp;|&lt;|\u0000");
			tokenizer._emitToken({type: 'Characters', data: data + chars});
			buffer.commit();
		}
		return true;
	}

	function character_reference_in_data_state(buffer) {
		var character = EntityParser.consumeEntity(buffer, tokenizer);
		tokenizer.setState(data_state);
		tokenizer._emitToken({type: 'Characters', data: character || '&amp;'});
		return true;
	}

	function rcdata_state(buffer) {
		var data = buffer.char();
		if (data === InputStream.EOF) {
			tokenizer._emitToken({type: 'EOF', data: null});
			return false;
		} else if (data === '&amp;') {
			tokenizer.setState(character_reference_in_rcdata_state);
		} else if (data === '&lt;') {
			tokenizer.setState(rcdata_less_than_sign_state);
		} else if (data === "\u0000") {
			tokenizer._parseError("invalid-codepoint");
			tokenizer._emitToken({type: 'Characters', data: '\uFFFD'});
			buffer.commit();
		} else {
			var chars = buffer.matchUntil("&amp;|&lt;|\u0000");
			tokenizer._emitToken({type: 'Characters', data: data + chars});
			buffer.commit();
		}
		return true;
	}

	function character_reference_in_rcdata_state(buffer) {
		var character = EntityParser.consumeEntity(buffer, tokenizer);
		tokenizer.setState(rcdata_state);
		tokenizer._emitToken({type: 'Characters', data: character || '&amp;'});
		return true;
	}

	function rawtext_state(buffer) {
		var data = buffer.char();
		if (data === InputStream.EOF) {
			tokenizer._emitToken({type: 'EOF', data: null});
			return false;
		} else if (data === '&lt;') {
			tokenizer.setState(rawtext_less_than_sign_state);
		} else if (data === "\u0000") {
			tokenizer._parseError("invalid-codepoint");
			tokenizer._emitToken({type: 'Characters', data: '\uFFFD'});
			buffer.commit();
		} else {
			var chars = buffer.matchUntil("&lt;|\u0000");
			tokenizer._emitToken({type: 'Characters', data: data + chars});
		}
		return true;
	}

	function plaintext_state(buffer) {
		var data = buffer.char();
		if (data === InputStream.EOF) {
			tokenizer._emitToken({type: 'EOF', data: null});
			return false;
		} else if (data === "\u0000") {
			tokenizer._parseError("invalid-codepoint");
			tokenizer._emitToken({type: 'Characters', data: '\uFFFD'});
			buffer.commit();
		} else {
			var chars = buffer.matchUntil("\u0000");
			tokenizer._emitToken({type: 'Characters', data: data + chars});
		}
		return true;
	}


	function script_data_state(buffer) {
		var data = buffer.char();
		if (data === InputStream.EOF) {
			tokenizer._emitToken({type: 'EOF', data: null});
			return false;
		} else if (data === '&lt;') {
			tokenizer.setState(script_data_less_than_sign_state);
		} else if (data === '\u0000') {
			tokenizer._parseError("invalid-codepoint");
			tokenizer._emitToken({type: 'Characters', data: '\uFFFD'});
			buffer.commit();
		} else {
			var chars = buffer.matchUntil("&lt;|\u0000");
			tokenizer._emitToken({type: 'Characters', data: data + chars});
		}
		return true;
	}

	function rcdata_less_than_sign_state(buffer) {
		var data = buffer.char();
		if (data === "/") {
			this._temporaryBuffer = '';
			tokenizer.setState(rcdata_end_tag_open_state);
		} else {
			tokenizer._emitToken({type: 'Characters', data: '&lt;'});
			buffer.unget(data);
			tok ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	this._scriptingEnabled = false;
}

/**
 * @param {String} source HTML source to parse
 */
DOMParser.prototype.parse = function(source) {
	this._tokenizer.<span class="apidocCodeKeywordSpan">tokenize</span>(source);
	return this._treeBuilder.document;
};

DOMParser.prototype.parseFragment = function(source, context) {
	this._treeBuilder.setFragmentContext(context);
	this._tokenizer.tokenize(source);
	return this._treeBuilder.getFragment();
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.html5.TreeBuilder" id="apidoc.module.html5.TreeBuilder">module html5.TreeBuilder</a></h1>


    <h2>
        <a href="#apidoc.element.html5.TreeBuilder.TreeBuilder" id="apidoc.element.html5.TreeBuilder.TreeBuilder">
        function <span class="apidocSignatureSpan">html5.</span>TreeBuilder
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function TreeBuilder() {
	this.tokenizer = null;
	this.errorHandler = null;
	this.scriptingEnabled = false;
	this.document = null;
	this.head = null;
	this.form = null;
	this.openElements = new ElementStack();
	this.activeFormattingElements = [];
	this.insertionMode = null;
	this.insertionModeName = "";
	this.originalInsertionMode = "";
	this.inQuirksMode = false; // TODO quirks mode
	this.compatMode = "no quirks";
	this.framesetOk = true;
	this.redirectAttachToFosterParent = false;
	this.selfClosingFlagAcknowledged = false;
	this.context = "";
	this.pendingTableCharacters = [];
	this.shouldSkipLeadingNewline = false;

	var tree = this;
	var modes = this.insertionModes = {};
	modes.base = {
		end_tag_handlers: {"-default": 'endTagOther'},
		start_tag_handlers: {"-default": 'startTagOther'},
		processEOF: function() {
			tree.generateImpliedEndTags();
			if (tree.openElements.length &gt; 2) {
				tree.parseError('expected-closing-tag-but-got-eof');
			} else if (tree.openElements.length == 2 &amp;&amp;
				tree.openElements.item(1).localName != 'body') {
				// This happens for framesets or something?
				tree.parseError('expected-closing-tag-but-got-eof');
			} else if (tree.context &amp;&amp; tree.openElements.length &gt; 1) {
				// XXX This is not what the specification says. Not sure what to do here.
				//tree.parseError('eof-in-innerhtml');
			}
		},
		processComment: function(data) {
			// For most phases the following is forceQuirks. Where it's not it will be
			// overridden.
			tree.insertComment(data, tree.currentStackItem().node);
		},
		processDoctype: function(name, publicId, systemId, forceQuirks) {
			tree.parseError('unexpected-doctype');
		},
		processStartTag: function(name, attributes, selfClosing) {
			if (this[this.start_tag_handlers[name]]) {
				this[this.start_tag_handlers[name]](name, attributes, selfClosing);
			} else if (this[this.start_tag_handlers["-default"]]) {
				this[this.start_tag_handlers["-default"]](name, attributes, selfClosing);
			} else {
				throw(new Error("No handler found for "+name));
			}
		},
		processEndTag: function(name) {
			if (this[this.end_tag_handlers[name]]) {
				this[this.end_tag_handlers[name]](name);
			} else if (this[this.end_tag_handlers["-default"]]) {
				this[this.end_tag_handlers["-default"]](name);
			} else {
				throw(new Error("No handler found for "+name));
			}
		},
		startTagHtml: function(name, attributes) {
			modes.inBody.startTagHtml(name, attributes);
		}
	};

	modes.initial = Object.create(modes.base);

	modes.initial.processEOF = function() {
		tree.parseError("expected-doctype-but-got-eof");
		this.anythingElse();
		tree.insertionMode.processEOF();
	};

	modes.initial.processComment = function(data) {
		tree.insertComment(data, tree.document);
	};

	modes.initial.processDoctype = function(name, publicId, systemId, forceQuirks) {
		tree.insertDoctype(name || '', publicId || '', systemId || '');

		if (forceQuirks || name != 'html' || (publicId != null &amp;&amp; ([
					"+//silmaril//dtd html pro v0r11 19970101//",
					"-//advasoft ltd//dtd html 3.0 aswedit + extensions//",
					"-//as//dtd html 3.0 aswedit + extensions//",
					"-//ietf//dtd html 2.0 level 1//",
					"-//ietf//dtd html 2.0 level 2//",
					"-//ietf//dtd html 2.0 strict level 1//",
					"-//ietf//dtd html 2.0 strict level 2//",
					"-//ietf//dtd html 2.0 strict//",
					"-//ietf//dtd html 2.0//",
					"-//ietf//dtd html 2.1e//",
					"-//ietf//dtd html 3.0//",
					"-//ietf//dtd html 3.0//",
					"-//ietf//dtd html 3.2 final//",
					"-//ietf//dtd html 3.2//",
					"-//ietf//dtd html 3//",
					"-//ietf//dtd html level 0//",
					"-//ietf//dtd html level 0//",
					"-//ietf//dtd html level 1//",
					"-//ietf//dtd html level 1//",
					"-//ietf//dtd html level 2//",
					"-//ietf//dtd html level 2//",
					"-//ietf//dtd html level 3//",
					"-//ietf//dtd html level 3//",
					"-//ietf//dtd html strict level 0//",
					"-//ietf//dtd html strict level 0//",
					"-//ietf//dtd html strict le ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.html5.TreeParser" id="apidoc.module.html5.TreeParser">module html5.TreeParser</a></h1>


    <h2>
        <a href="#apidoc.element.html5.TreeParser.TreeParser" id="apidoc.element.html5.TreeParser.TreeParser">
        function <span class="apidocSignatureSpan">html5.</span>TreeParser
        <span class="apidocSignatureSpan">(contentHandler, lexicalHandler)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function TreeParser(contentHandler, lexicalHandler){

	/**
	 * The content handler.
	 */
	this.contentHandler;

	/**
	 * The lexical handler.
	 */
	this.lexicalHandler;

	/**
	 * The current locator.
	 */
	this.locatorDelegate;

	if (!contentHandler) {
		throw new Error("contentHandler was null.");
	}
	this.contentHandler = contentHandler;
	if (!lexicalHandler) {
		this.lexicalHandler = new NullLexicalHandler();
	} else {
		this.lexicalHandler = lexicalHandler;
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.html5.array_helpers" id="apidoc.module.html5.array_helpers">module html5.array_helpers</a></h1>


    <h2>
        <a href="#apidoc.element.html5.array_helpers.last" id="apidoc.element.html5.array_helpers.last">
        function <span class="apidocSignatureSpan">html5.array_helpers.</span>last
        <span class="apidocSignatureSpan">(array)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">last = function (array) {
  return array[array.length - 1];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>